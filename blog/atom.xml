<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://modernjs.dev/blog</id>
    <title>Modern.js - 现代 Web 工程体系 Blog</title>
    <updated>2022-05-11T06:40:54.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://modernjs.dev/blog"/>
    <subtitle>Modern.js - 现代 Web 工程体系 Blog</subtitle>
    <icon>https://modernjs.dev/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[近期更新：支持 Windows、初步提供部署功能]]></title>
        <id>release-windows-deploy</id>
        <link href="https://modernjs.dev/blog/release-windows-deploy"/>
        <updated>2022-05-11T06:40:54.000Z</updated>
        <summary type="html"><![CDATA[1. 支持 Windows 平台]]></summary>
        <content type="html"><![CDATA[<div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>重点</h5></div><div class="admonition-content"><ol><li>支持 Windows 平台</li><li>初步提供开箱即用的部署功能</li></ol></div></div><h2 class="anchor anchorWithStickyNavbar_arQY" id="支持-windows-平台">支持 Windows 平台<a class="hash-link" href="#支持-windows-平台" title="Direct link to heading">​</a></h2><p>在本次更新中，支持在 Windows 平台开发和使用 Modern.js。</p><p>其中，Unbundled 模式暂不支持在 Windows 平台使用，支持即将上线。</p><h3 class="anchor anchorWithStickyNavbar_arQY" id="示例应用mwa工程">示例：应用（MWA）工程<a class="hash-link" href="#示例应用mwa工程" title="Direct link to heading">​</a></h3><p>在 Windows 平台上，可使用 <code>npx @modern-js/create</code> 创建应用项目：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/create-mwa-windows.mp4" type="video/mp4"></video><p>在项目目录执行 <code>pnpm run dev</code> 命令可进行项目开发和调试：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/mwa-dev-windows.mp4" type="video/mp4"></video><p>在项目目录执行 <code>pnpm run build</code> 命令可进行项目打包：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/mwa-build-windows.mp4" type="video/mp4"></video><p>在项目目录执行 <code>pnpm run new</code> 命令可开启项目扩展功能，如开启 BFF：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/mwa-new-windows.mp4" type="video/mp4"></video><p>在项目目录执行 <code>pnpm run test</code> 命令，可运行单元测试和集成测试：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/mwa-test-windows.mp4" type="video/mp4"></video><h3 class="anchor anchorWithStickyNavbar_arQY" id="示例monorepo-工程">示例：Monorepo 工程<a class="hash-link" href="#示例monorepo-工程" title="Direct link to heading">​</a></h3><p>在 Windows 平台上，可使用 <code>npx @modern-js/create</code> 创建 Monorepo：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/create-monorepo-windows.mp4" type="video/mp4"></video><p>在 Monorepo 中执行 <code>pnpm run new</code> 可创建子项目，例如创建模块子项目：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/monorepo-create-module-windows.mp4" type="video/mp4"></video><p>在模块子项目目录执行 <code>pnpm run new</code> 可开启模块扩展功能，例如 Storybook：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/monorepo-module-storybook-windows.mp4" type="video/mp4"></video><p>另外，Modern.js 官网上，针对 Windows 和 macOS 上不同的命令，将会使用以下形式展示：</p><p><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/doc-windows.png" alt="Windows 命令文档展示形式"></p><h2 class="anchor anchorWithStickyNavbar_arQY" id="初步提供开箱即用的部署功能">初步提供开箱即用的部署功能<a class="hash-link" href="#初步提供开箱即用的部署功能" title="Direct link to heading">​</a></h2><p>本次更新中，Modern.js 提供了部署相关的支持，包括：</p><ol><li>使用<a href="https://modernjs.dev/docs/guides/features/server-side/deploy/modern-server/web-server" target="_blank" rel="noopener noreferrer">内置的产品级 Web 服务器</a>。</li><li>提供 <a href="https://modernjs.dev/docs/guides/features/server-side/deploy/upload-cdn/oss" target="_blank" rel="noopener noreferrer">CDN 上传能力</a>，将资源文件上传到阿里云 OSS 或腾讯云 COS 中。</li><li>用<a href="https://modernjs.dev/docs/guides/features/server-side/deploy/static-hosting" target="_blank" rel="noopener noreferrer">第三方的静态 Web 服务器（包括 CDN）</a>来托管应用产物。</li></ol><p>使用 Modern.js 生成器开启对应功能后，只需要简单配置云平台所需的基本信息（例如 SecretID，SecretKey，BucketName 等）就可以直接部署到云平台。</p><p>在应用根目录下创建 .env 文件，或发布平台（例如 GitHub CI）中配置那些无需保密的信息，例如：</p><div class="codeBlockContainer_kPZL language-text theme-code-block"><div class="codeBlockContent_R7CW text"><pre tabindex="0" class="prism-code language-text codeBlock_YlG4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_avdw"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 阿里云账号 ID（腾讯云无需该配置）</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CLOUD_ACCOUNT_ID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Bucket 名称</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CLOUD_BUCKET_NAME</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 云平台部署区域</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CLOUD_REGION</span><br></span></code></pre><button type="button" aria-label="复制代码到剪切板" class="copyButton_sEIV clean-btn">复制</button></div></div><p>而与账号鉴权相关的信息务必在平台上配置，例如：</p><div class="codeBlockContainer_kPZL language-text theme-code-block"><div class="codeBlockContent_R7CW text"><pre tabindex="0" class="prism-code language-text codeBlock_YlG4 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_avdw"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 云平台 AccessKey</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CLOUD_SECRET_ID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 云平台 Secret Key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CLOUD_SECRET_KEY</span><br></span></code></pre><button type="button" aria-label="复制代码到剪切板" class="copyButton_sEIV clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_arQY" id="示例">示例<a class="hash-link" href="#示例" title="Direct link to heading">​</a></h3><p>在项目中执行 <code>pnpm run new</code> 启用部署功能：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/enable-deploy.mp4" type="video/mp4"></video><p>使用阿里云 FC + 部署应用：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/deploy-aliyun.mp4" type="video/mp4"></video><blockquote><p><a href="https://modernjs.dev/docs/guides/features/server-side/deploy/modern-server/use-lambda/aliyun-fc" target="_blank" rel="noopener noreferrer">了解更多</a></p></blockquote><p>使用腾讯云 SCF + COS 部署应用：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/deploy-tencent.mp4" type="video/mp4"></video><blockquote><p><a href="https://modernjs.dev/docs/guides/features/server-side/deploy/modern-server/use-lambda/tencent-scf" target="_blank" rel="noopener noreferrer">了解更多</a></p></blockquote><p>使用静态 Web 服务器托管产物：</p><video controls="" width="100%" src="https://lf3-static.bytednsdoc.com/obj/eden-cn/aphqeh7uhohpquloj/modern-js/media/deploy-static.mp4" type="video/mp4"></video><blockquote><p><a href="https://modernjs.dev/docs/guides/features/server-side/deploy/static-hosting" target="_blank" rel="noopener noreferrer">了解更多</a></p></blockquote><p>目前暂不支持不同云平台间产品混合使用。另外，Monorepo 部署支持将在后续上线，敬请期待。更多内容可以前往官网了解。</p><h2 class="anchor anchorWithStickyNavbar_arQY" id="changelog">Changelog<a class="hash-link" href="#changelog" title="Direct link to heading">​</a></h2><ul><li>生成器模板更新 <a href="https://github.com/modern-js-dev/modern.js/pull/176" target="_blank" rel="noopener noreferrer">#176</a> <a href="https://github.com/modern-js-dev/modern.js/pull/177" target="_blank" rel="noopener noreferrer">#177</a> <a href="https://github.com/modern-js-dev/modern.js/pull/183" target="_blank" rel="noopener noreferrer">#183</a> <a href="https://github.com/modern-js-dev/modern.js/pull/190" target="_blank" rel="noopener noreferrer">#190</a> <a href="https://github.com/modern-js-dev/modern.js/pull/185" target="_blank" rel="noopener noreferrer">#185</a> <a href="https://github.com/modern-js-dev/modern.js/pull/260" target="_blank" rel="noopener noreferrer">#260</a> <a href="https://github.com/modern-js-dev/modern.js/pull/259" target="_blank" rel="noopener noreferrer">#259</a> <a href="https://github.com/modern-js-dev/modern.js/pull/285" target="_blank" rel="noopener noreferrer">#285</a> <a href="https://github.com/modern-js-dev/modern.js/pull/300" target="_blank" rel="noopener noreferrer">#300</a></li><li>修复初始化项目 lint 报错 <a href="https://github.com/modern-js-dev/modern.js/pull/194" target="_blank" rel="noopener noreferrer">#194</a> <a href="https://github.com/modern-js-dev/modern.js/pull/258" target="_blank" rel="noopener noreferrer">#258</a></li><li>应用项目启用 Electron 功能后增加提示信息 <a href="https://github.com/modern-js-dev/modern.js/pull/181" target="_blank" rel="noopener noreferrer">#181</a></li><li>模块工程方案调整清除 dist 目录时机 <a href="https://github.com/modern-js-dev/modern.js/pull/202" target="_blank" rel="noopener noreferrer">#202</a></li><li>一体化调用生成代码函数增加 requireResolve 参数 <a href="https://github.com/modern-js-dev/modern.js/pull/201" target="_blank" rel="noopener noreferrer">#201</a></li><li>修复模块工程方案项目初始化未生成 .npmignore<a href="https://github.com/modern-js-dev/modern.js/pull/209" target="_blank" rel="noopener noreferrer"> #209</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/198" target="_blank" rel="noopener noreferrer">#198</a></li><li>修复 MWA 项目在 Node.js 17 环境 dev 命令报错 <a href="https://github.com/modern-js-dev/modern.js/pull/214" target="_blank" rel="noopener noreferrer">#214</a></li><li>优化 node-bundler-require 的 external 正则匹配规则 <a href="https://github.com/modern-js-dev/modern.js/pull/218" target="_blank" rel="noopener noreferrer">#218</a> <a href="https://github.com/modern-js-dev/modern.js/pull/275" target="_blank" rel="noopener noreferrer">#275</a></li><li>修复 babel 配置版本号 <a href="https://github.com/modern-js-dev/modern.js/pull/246" target="_blank" rel="noopener noreferrer">#246</a></li><li>test 命令支持匹配 Windows 平台文件路径 <a href="https://github.com/modern-js-dev/modern.js/pull/247" target="_blank" rel="noopener noreferrer">#247</a></li><li>修复 unbundle 模式测试报错 <a href="https://github.com/modern-js-dev/modern.js/pull/226" target="_blank" rel="noopener noreferrer">#226</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/224" target="_blank" rel="noopener noreferrer">#224</a> <a href="https://github.com/modern-js-dev/modern.js/issues/225" target="_blank" rel="noopener noreferrer">#225</a></li><li>修复 path 路径引用问题 <a href="https://github.com/modern-js-dev/modern.js/pull/253" target="_blank" rel="noopener noreferrer">#253</a></li><li>Windows 平台支持 <a href="https://github.com/modern-js-dev/modern.js/pull/249" target="_blank" rel="noopener noreferrer">#249</a> <a href="https://github.com/modern-js-dev/modern.js/pull/263" target="_blank" rel="noopener noreferrer">#263</a> <a href="https://github.com/modern-js-dev/modern.js/pull/268" target="_blank" rel="noopener noreferrer">#268</a> <a href="https://github.com/modern-js-dev/modern.js/pull/270" target="_blank" rel="noopener noreferrer">#270</a> <a href="https://github.com/modern-js-dev/modern.js/pull/273" target="_blank" rel="noopener noreferrer">#273</a> <a href="https://github.com/modern-js-dev/modern.js/pull/276" target="_blank" rel="noopener noreferrer">#276</a> <a href="https://github.com/modern-js-dev/modern.js/pull/219" target="_blank" rel="noopener noreferrer">#219</a> <a href="https://github.com/modern-js-dev/modern.js/pull/286" target="_blank" rel="noopener noreferrer">#286</a> <a href="https://github.com/modern-js-dev/modern.js/pull/290" target="_blank" rel="noopener noreferrer">#290</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/180" target="_blank" rel="noopener noreferrer">#180</a> <a href="https://github.com/modern-js-dev/modern.js/issues/182" target="_blank" rel="noopener noreferrer">#182</a> <a href="https://github.com/modern-js-dev/modern.js/issues/236" target="_blank" rel="noopener noreferrer">#236</a></li><li>Storybook 使用 esbuild 生成预览文件 <a href="https://github.com/modern-js-dev/modern.js/pull/254" target="_blank" rel="noopener noreferrer">#254</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/228" target="_blank" rel="noopener noreferrer">#228</a></li><li>修复使用 declare class 时 babel 编译报错 <a href="https://github.com/modern-js-dev/modern.js/pull/245" target="_blank" rel="noopener noreferrer">#245</a></li><li>修复启用功能安装依赖版本号 <a href="https://github.com/modern-js-dev/modern.js/pull/267" target="_blank" rel="noopener noreferrer">#267</a></li><li>修复 unbundled 模式在 js 项目报错 <a href="https://github.com/modern-js-dev/modern.js/pull/262" target="_blank" rel="noopener noreferrer">#262</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/262" target="_blank" rel="noopener noreferrer">#262</a></li><li>Egg 和 Koa 请求返回类型改为 JSON <a href="https://github.com/modern-js-dev/modern.js/pull/266" target="_blank" rel="noopener noreferrer">#266</a></li><li>new 命令支持启用 SSG <a href="https://github.com/modern-js-dev/modern.js/pull/265" target="_blank" rel="noopener noreferrer">#265</a> <a href="https://github.com/modern-js-dev/modern.js/pull/299" target="_blank" rel="noopener noreferrer">#299</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/298" target="_blank" rel="noopener noreferrer">#298</a></li><li>修复 unbundled 模式不支持使用 BFF <a href="https://github.com/modern-js-dev/modern.js/pull/271" target="_blank" rel="noopener noreferrer">#271</a> <a href="https://github.com/modern-js-dev/modern.js/pull/269" target="_blank" rel="noopener noreferrer">#</a><a href="https://github.com/modern-js-dev/modern.js/pull/269" target="_blank" rel="noopener noreferrer">269</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/235" target="_blank" rel="noopener noreferrer">#235</a> <a href="https://github.com/modern-js-dev/modern.js/issues/257" target="_blank" rel="noopener noreferrer">#257</a></li><li>Egg 框架 body 解析配置 <a href="https://github.com/modern-js-dev/modern.js/pull/272" target="_blank" rel="noopener noreferrer">#272</a></li><li>优化 unbundled 热更新提示 <a href="https://github.com/modern-js-dev/modern.js/pull/264" target="_blank" rel="noopener noreferrer">#264</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/186" target="_blank" rel="noopener noreferrer">#186</a></li><li>移除无用的中间件 <a href="https://github.com/modern-js-dev/modern.js/pull/239" target="_blank" rel="noopener noreferrer">#239</a></li><li>移除 useHeaders API <a href="https://github.com/modern-js-dev/modern.js/pull/279" target="_blank" rel="noopener noreferrer">#279</a></li><li>支持 SSG 配置 <a href="https://github.com/modern-js-dev/modern.js/pull/207" target="_blank" rel="noopener noreferrer">#207</a></li><li>修复 HTML 模板 <a href="https://github.com/modern-js-dev/modern.js/pull/277" target="_blank" rel="noopener noreferrer">#277</a></li><li>调整 webpack peerDependence 依赖 <a href="https://github.com/modern-js-dev/modern.js/pull/293" target="_blank" rel="noopener noreferrer">#293</a></li><li>修改初始化项目默认分支 <a href="https://github.com/modern-js-dev/modern.js/pull/306" target="_blank" rel="noopener noreferrer">#306</a> <a href="https://github.com/modern-js-dev/codesmith/pull/23" target="_blank" rel="noopener noreferrer">#23</a></li><li>使用 Egg 框架时，根据项目代码；生成类型文件 <a href="https://github.com/modern-js-dev/modern.js/pull/284" target="_blank" rel="noopener noreferrer">#284</a></li><li>将底层插件实现改为基于 Farrow <a href="https://github.com/modern-js-dev/modern.js/pull/305" target="_blank" rel="noopener noreferrer">#305</a></li><li>修复 Storybook 路径问题 <a href="https://github.com/modern-js-dev/modern.js/pull/308" target="_blank" rel="noopener noreferrer">#308</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/291" target="_blank" rel="noopener noreferrer">#291</a></li><li>修复模块工程方案 new 命令报错问题 <a href="https://github.com/modern-js-dev/modern.js/pull/316" target="_blank" rel="noopener noreferrer">#316</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/314" target="_blank" rel="noopener noreferrer">#314</a></li><li>修复 Tailwind CSS 配置问题 <a href="https://github.com/modern-js-dev/modern.js/pull/317" target="_blank" rel="noopener noreferrer">#317</a></li><li>修复启用 unbundled 模式依赖安装问题 <a href="https://github.com/modern-js-dev/codesmith/pull/12" target="_blank" rel="noopener noreferrer">#12</a> / <a href="https://github.com/modern-js-dev/modern.js/issues/238" target="_blank" rel="noopener noreferrer">#238</a></li><li>安装依赖和项目 git 初始化失败仅展示警告 <a href="https://github.com/modern-js-dev/codesmith/pull/17" target="_blank" rel="noopener noreferrer">#17</a></li><li>@electron/remote 升级 2.0 版本 <a href="https://github.com/modern-js-dev/electron-sprout/pull/30" target="_blank" rel="noopener noreferrer">#30</a></li><li>Electron 主进程支持除主目录（electron）外其余目录的编译，比如：shared 目录<a href="https://github.com/modern-js-dev/electron-sprout/pull/44" target="_blank" rel="noopener noreferrer">#44</a></li><li>Electron 修复 linux arm64 构建问题。<a href="https://github.com/modern-js-dev/electron-sprout/pull/47" target="_blank" rel="noopener noreferrer">#47</a></li><li>修复 useModel 加载多个 Model 的时候 actions 类型合并问题 <a href="https://github.com/modern-js-dev/reduck/pull/31" target="_blank" rel="noopener noreferrer">#31</a> / <a href="https://github.com/modern-js-dev/reduck/issues/30" target="_blank" rel="noopener noreferrer">#30</a></li><li>修复 SourceMap 路径问题 <a href="https://github.com/modern-js-dev/modern.js/pull/309" target="_blank" rel="noopener noreferrer">#309</a></li><li>应用项目部署功能<a href="https://github.com/modern-js-dev/modern.js/pull/320" target="_blank" rel="noopener noreferrer"> #320</a></li></ul><h2 class="anchor anchorWithStickyNavbar_arQY" id="升级指南">升级指南<a class="hash-link" href="#升级指南" title="Direct link to heading">​</a></h2><p>本次更新可通过删除项目 pnpm-lock.yaml 或 yarn.lock 重新安装依赖即可使用 Modern.js 最新版本。
Modern.js 将提供自动升级工具，后续升级可使用升级工具进行，敬请期待。</p>]]></content>
    </entry>
</feed>