(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["docs_en_guides_topic-detail_changesets_add_mdx"],{48780:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}(n,{frontmatter:function(){return r},title:function(){return i},toc:function(){return h},default:function(){return o}});var s=t("9880"),a=t("23169"),r={sidebar_position:2},i="Add Changesets",h=[{text:"Information",depth:2,id:"information"},{text:"Steps",depth:2,id:"steps"},{text:"NPM Module",depth:3,id:"npm-module"},{text:"Run the change command in the root directory:",depth:4,id:"run-the-change-command-in-the-root-directory:"},{text:"Select the type of version for this change",depth:4,id:"select-the-type-of-version-for-this-change"},{text:"Fill in the changelog information",depth:4,id:"fill-in-the-changelog-information"},{text:"Monorepo",depth:3,id:"monorepo"},{text:"Run the change command in the root directory",depth:4,id:"run-the-change-command-in-the-root-directory"},{text:"Select the list of packages to upgrade for this change",depth:4,id:"select-the-list-of-packages-to-upgrade-for-this-change"},{text:"Select the packages corresponding to different version types",depth:4,id:"select-the-packages-corresponding-to-different-version-types"},{text:"Fill in the changelog information",depth:4,id:"fill-in-the-changelog-information-1"},{text:"Parameters",depth:2,id:"parameters"},{text:"Notes",depth:2,id:"notes"}];function c(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",div:"div",h3:"h3",h4:"h4",pre:"pre",code:"code",img:"img"},(0,a.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"add-changesets",children:["Add Changesets",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#add-changesets",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"When we finish development, we need to add a changeset to declare the current changes for version releases."}),"\n",(0,s.jsxs)(n.h2,{id:"information",children:["Information",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#information",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"A changeset includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Which packages are affected by this change."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The type of version for this change, which complies with the ",(0,s.jsx)(n.a,{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer",children:"semver"})," specification."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Changelog information for this change."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"steps",children:["Steps",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#steps",children:"#"})]}),"\n",(0,s.jsxs)(n.div,{className:"modern-directive info",children:[(0,s.jsx)(n.div,{className:"modern-directive-title",children:"INFO"}),(0,s.jsx)(n.div,{className:"modern-directive-content",children:(0,s.jsx)(n.p,{children:"The following example commands are all using pnpm. If you need to use other package management tools, please replace them as needed."})})]}),"\n",(0,s.jsxs)(n.h3,{id:"npm-module",children:["NPM Module",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#npm-module",children:"#"})]}),"\n",(0,s.jsxs)(n.h4,{id:"run-the-change-command-in-the-root-directory:",children:["Run the change command in the root directory:",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run-the-change-command-in-the-root-directory:",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm run change\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"select-the-type-of-version-for-this-change",children:["Select the type of version for this change",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#select-the-type-of-version-for-this-change",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-select-version.png",alt:""})}),"\n",(0,s.jsxs)(n.h4,{id:"fill-in-the-changelog-information",children:["Fill in the changelog information",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fill-in-the-changelog-information",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-input-changelog.png",alt:""})}),"\n",(0,s.jsxs)(n.p,{children:["After running, a corresponding changeset file will be created in the ",(0,s.jsx)(n.code,{children:".changeset"})," directory of the project, and the file content is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"---\n'module-changeset': patch\n---\n\nfeat: test module solution changeset\n"})}),"\n",(0,s.jsx)(n.p,{children:"This file contains all the information of the changeset."}),"\n",(0,s.jsxs)(n.h3,{id:"monorepo",children:["Monorepo",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#monorepo",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["There are three NPM module packages in the monorepo, ",(0,s.jsx)(n.code,{children:"module-1"}),", ",(0,s.jsx)(n.code,{children:"module-2"}),", and ",(0,s.jsx)(n.code,{children:"module-3"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"run-the-change-command-in-the-root-directory",children:["Run the change command in the root directory",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run-the-change-command-in-the-root-directory",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm run change\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"select-the-list-of-packages-to-upgrade-for-this-change",children:["Select the list of packages to upgrade for this change",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#select-the-list-of-packages-to-upgrade-for-this-change",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Changesets will categorize the packages in the Monorepo into two categories, ",(0,s.jsx)(n.code,{children:"changed packages"})," and ",(0,s.jsx)(n.code,{children:"unchanged packages"}),", based on the current code changes (",(0,s.jsx)(n.code,{children:"git diff Head...baseBranch"}),"), making it easy for users to choose."]}),"\n",(0,s.jsx)(n.p,{children:"Use the space key to select the corresponding package or category, and then press Enter after the selection is completed:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-select-packages.png",alt:""})}),"\n",(0,s.jsxs)(n.h4,{id:"select-the-packages-corresponding-to-different-version-types",children:["Select the packages corresponding to different version types",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#select-the-packages-corresponding-to-different-version-types",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Changesets will ask about the ",(0,s.jsx)(n.code,{children:"major"})," and ",(0,s.jsx)(n.code,{children:"minor"})," types. If there are packages that have not selected these two types, the ",(0,s.jsx)(n.code,{children:"patch"})," type will be used by default."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-auto-select-patch.png",alt:""})}),"\n",(0,s.jsxs)(n.h4,{id:"fill-in-the-changelog-information-1",children:["Fill in the changelog information",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fill-in-the-changelog-information-1",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://lf3-static.bytednsdoc.com/obj/eden-cn/zq-uylkvT/ljhwZthlaukjlkulzlp/changeset-input-changelog-monorepo.png",alt:""})}),"\n",(0,s.jsxs)(n.p,{children:["After running, a corresponding changeset file will be created in the ",(0,s.jsx)(n.code,{children:".changeset"})," directory of the project, and the file content is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"---\n'module-2': minor\n'module-3': patch\n---\n\nfeat: test-changeset\n"})}),"\n",(0,s.jsx)(n.p,{children:"This file contains all the information of the changeset, and different packages will be marked according to the selected version type."}),"\n",(0,s.jsxs)(n.h2,{id:"parameters",children:["Parameters",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#parameters",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"change"})," command supports the following parameters:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--empty"}),": Adds an empty changeset."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm run change --empty\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After running, an empty changeset file will be created in the ",(0,s.jsx)(n.code,{children:".changeset"})," directory of the project, and the file content is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"---\n---\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"--open"}),": When using this parameter, the system default editor will be opened for filling in the changelog."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"notes",children:["Notes",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#notes",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Not all changes require changesets"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If the current change is to modify some infrastructure of the repository, such as CI, testing, etc., there is no need to add changesets, or an empty changeset can be added."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multiple changesets can be submitted in one pull request"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["When a pull request has multiple feature developments or bug fixes, multiple ",(0,s.jsx)(n.code,{children:"pnpm run change"})," commands can be executed to add multiple changeset files. Each file selects the corresponding packages for the feature and adds change information."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"When creating a changeset, all packages related to the feature need to be selected"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When creating a changeset in a Monorepo, all related packages to the feature need to be selected to avoid some packages not being published when releasing."})]})}var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,a.useMDXComponents)(),e.components).wrapper;return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(c,e)})):c(e)}}}]);