(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["docs_zh_configure_app_runtime_intro_mdx"],{55854:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e,n){for(var r in n)Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}(n,{frontmatter:function(){return d},title:function(){return c},toc:function(){return a},default:function(){return o}});var i=r("9880"),s=r("23169"),t=r("78955"),d={sidebar_label:"总览",sidebar_position:1},c="总览",a=[{text:"配置方式",depth:2,id:"配置方式"},{text:"runtime",depth:3,id:"runtime"},{text:"基本用法",depth:4,id:"基本用法"},{text:"运行时配置",depth:4,id:"运行时配置"},{text:"runtimeByEntries",depth:3,id:"runtimebyentries"},{text:"说明",depth:4,id:"说明"}];function l(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",ul:"ul",li:"li",strong:"strong",code:"code",h4:"h4",pre:"pre",div:"div"},(0,s.useMDXComponents)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"总览",children:["总览",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#总览",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"此节将介绍 Runtime 插件的配置。"}),"\n",(0,i.jsxs)(n.h2,{id:"配置方式",children:["配置方式",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置方式",children:"#"})]}),"\n",(0,i.jsxs)(n.h3,{id:"runtime",children:["runtime",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#runtime",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"类型："})," ",(0,i.jsx)(n.code,{children:"Object"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"runtime 配置方式如下："}),"\n",(0,i.jsxs)(n.h4,{id:"基本用法",children:["基本用法",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基本用法",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["在 ",(0,i.jsx)(n.code,{children:"modern.config.ts"})," 中配置"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="modern.config.ts"',children:"import { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    state: true,\n    router: true,\n  },\n});\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"运行时配置",children:["运行时配置",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#运行时配置",children:"#"})]}),"\n",(0,i.jsxs)(n.p,{children:["通过 ",(0,i.jsx)(n.a,{href:"/apis/app/runtime/app/define-config",children:(0,i.jsx)(n.code,{children:"defineConfig"})})," API 配置："]}),"\n",(0,i.jsxs)(n.div,{className:"modern-directive info",children:[(0,i.jsx)(n.div,{className:"modern-directive-title",children:"INFO"}),(0,i.jsxs)(n.div,{className:"modern-directive-content",children:[(0,i.jsx)(n.p,{children:"当 runtime 配置中存在函数时，只能使用该方式进行配置。"}),"\n"]})]}),"\n","\n",(0,i.jsxs)(t.Tabs,{children:[(0,i.jsx)(t.Tab,{value:"layout",label:"约定式路由",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",meta:'title="src/routes/layout.tsx"',children:"import type { AppConfig } from '@modern-js/runtime';\n\nexport const config = (): AppConfig => {\n  return {\n    router: {\n      supportHtml5History: false\n    }\n  }\n};\n"})})}),(0,i.jsx)(t.Tab,{value:"app",label:"自控路由",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="src/App.tsx"',children:"import { defineConfig } from '@modern-js/runtime';\n\nconst App = () => {\n  /** */\n};\n\ndefineConfig(App, {\n  router: {\n    supportHtml5History: false,\n  },\n});\n\nexport default App;\n"})})})]}),"\n",(0,i.jsxs)(n.div,{className:"modern-directive info",children:[(0,i.jsx)(n.div,{className:"modern-directive-title",children:"INFO"}),(0,i.jsxs)(n.div,{className:"modern-directive-content",children:[(0,i.jsx)(n.p,{children:"使用运行时配置，可以解决 Runtime 插件配置需要在运行时才能获取到具体内容问题。"}),"\n",(0,i.jsxs)(n.p,{children:["Runtime 插件运行时配置和直接在 ",(0,i.jsx)(n.code,{children:"modern.config.ts"})," 中的配置默认会进行合并，且运行时配置优先级更高。"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.div,{className:"modern-directive warning",children:[(0,i.jsx)(n.div,{className:"modern-directive-title",children:"WARNING"}),(0,i.jsxs)(n.div,{className:"modern-directive-content",children:[(0,i.jsxs)(n.p,{children:["defineConfig 中只能定义 Runtime 插件的具体配置内容，确认是否开启插件还需要通过 ",(0,i.jsx)(n.code,{children:"package.json"})," 中的 ",(0,i.jsx)(n.code,{children:"modernConfig"})," 或者 ",(0,i.jsx)(n.code,{children:"modern.config.ts"})," 中的配置决定。"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.h3,{id:"runtimebyentries",children:["runtimeByEntries",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#runtimebyentries",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"类型："})," ",(0,i.jsx)(n.code,{children:"Object"})]}),"\n",(0,i.jsx)(n.li,{children:"**默认值：**无"}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"说明",children:["说明",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#说明",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"按入口添加 runtime 配置，选项属性同 runtime 一致，指定值会和 runtime 属性内容做替换合并操作。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:'title="modern.config.ts"',children:"import { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  runtime: {\n    state: false,\n  },\n  runtimeByEntries: {\n    entry1: {\n      state: true, // { state: true }\n    },\n    entry2: {\n      // { state: false, router: true }\n      router: true,\n    },\n  },\n});\n"})})]})}var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,s.useMDXComponents)(),e.components).wrapper;return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(l,e)})):l(e)}}}]);