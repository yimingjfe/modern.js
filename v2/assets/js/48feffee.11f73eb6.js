"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4947],{44993:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>s});var i=t(52983);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=i.createContext({}),c=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=c(e.components);return i.createElement(o.Provider,{value:n},e.children)},k={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=c(t),s=r,d=m["".concat(o,".").concat(s)]||m[s]||k[s]||l;return t?i.createElement(d,a(a({ref:n},u),{},{components:t})):i.createElement(d,a({ref:n},u))}));function s(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,a=new Array(l);a[0]=m;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,a[1]=p;for(var c=2;c<l;c++)a[c]=t[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},78295:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>s,frontMatter:()=>p,metadata:()=>c,toc:()=>k});var i=t(18249),r=(t(52983),t(44993));const l={toc:[{value:"chunkSplit.strategy",id:"chunksplitstrategy",level:3},{value:"chunkSplit.minSize",id:"chunksplitminsize",level:3},{value:"chunkSplit.maxSize",id:"chunksplitmaxsize",level:3},{value:"chunkSplit.forceSplitting",id:"chunksplitforcesplitting",level:3},{value:"chunkSplit.splitChunks",id:"chunksplitsplitchunks",level:3},{value:"chunkSplit.override",id:"chunksplitoverride",level:3}]};function a(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"Object")),(0,r.kt)("li",{parentName:"ul"},"Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"{ strategy: 'split-by-experience' }"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit")," \u7528\u4e8e\u914d\u7f6e Builder \u7684\u62c6\u5305\u7b56\u7565\u3002\u914d\u7f6e\u9879\u7684\u7c7b\u578b ",(0,r.kt)("inlineCode",{parentName:"p"},"ChunkSplit")," \u5982\u4e0b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\ninterface SplitBySize {\n  strategy?: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n  override?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\ninterface SplitCustom {\n  strategy?: 'custom';\n  splitChunks?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\nexport type ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n")),(0,r.kt)("h3",{id:"chunksplitstrategy"},"chunkSplit.strategy"),(0,r.kt)("p",null,"Builder \u652f\u6301\u516d\u79cd\u7c7b\u578b\u7684\u62c6\u5305\u7b56\u7565:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"split-by-experience"),": \u6839\u636e\u7ecf\u9a8c\u5185\u7f6e\u62c6\u5206\u7b56\u7565"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"split-by-module"),": \u6839\u636e NPM \u5305\u62c6\u5206\uff0c\u6bcf\u4e2a NPM \u5305\u4e00\u4e2a chunk"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"split-by-size"),": \u6839\u636e chunk \u5927\u5c0f\u62c6\u5206"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"all-in-one"),": \u6240\u6709\u4ee3\u7801\u6253\u5305\u5230\u4e00\u4e2a chunk"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"single-vendor"),": node_modules \u4e2d\u7684\u4ee3\u7801\u6253\u5305\u5230\u4e00\u4e2a\u5355\u72ec\u7684 chunk"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"custom"),": \u81ea\u5b9a\u4e49\u62c6\u5305\u914d\u7f6e")),(0,r.kt)("p",null,"Builder \u9ed8\u8ba4\u91c7\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-experience")," \u7b56\u7565\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u4ee5\u4e0b\u7684 NPM \u5305\u5206\u7ec4\u4f1a\u88ab\u62c6\u5206\u4e3a\u5355\u72ec\u7684 chunk:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"react")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"react-dom")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"react-router"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"history")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"react-router-dom")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"antd")," \u7ec4\u4ef6\u5e93"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"semi")," \u7ec4\u4ef6\u5e93"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"arco")," \u7ec4\u4ef6\u5e93"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@babel/runtime")," \u7684\u4ee3\u7801(\u4e5f\u5305\u62ec ",(0,r.kt)("inlineCode",{parentName:"li"},"@babel/runtime-corejs2"),"\u3001 ",(0,r.kt)("inlineCode",{parentName:"li"},"@babel/runtime-corejs3"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"lodash")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"lodash-es")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"core-js"))),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u5176\u4ed6\u62c6\u5305\u7b56\u7565\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," \u914d\u7f6e\u9879\u6765\u6307\u5b9a\u3002"),(0,r.kt)("h3",{id:"chunksplitminsize"},"chunkSplit.minSize"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"number")),(0,r.kt)("li",{parentName:"ul"},"Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"10000"))),(0,r.kt)("p",null,"\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-size")," \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.minSize")," \u914d\u7f6e\u9879\u6765\u6307\u5b9a chunk \u7684\u6700\u5c0f\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282\u3002\u9ed8\u8ba4\u503c\u4e3a 10000\u3002\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      minSize: 20000,\n    },\n  },\n};\n")),(0,r.kt)("h3",{id:"chunksplitmaxsize"},"chunkSplit.maxSize"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"number")),(0,r.kt)("li",{parentName:"ul"},"Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"Infinity"))),(0,r.kt)("p",null,"\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-size")," \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.maxSize")," \u914d\u7f6e\u9879\u6765\u6307\u5b9a chunk \u7684\u6700\u5927\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282\u3002\u9ed8\u8ba4\u503c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"Infinity"),"\u3002\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      maxSize: 50000,\n    },\n  },\n};\n")),(0,r.kt)("h3",{id:"chunksplitforcesplitting"},"chunkSplit.forceSplitting"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Type: ",(0,r.kt)("inlineCode",{parentName:"li"},"Array<RegExp>")),(0,r.kt)("li",{parentName:"ul"},"Default: ",(0,r.kt)("inlineCode",{parentName:"li"},"[]"))),(0,r.kt)("p",null,"\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.forceSplitting")," \u914d\u7f6e\u9879\u53ef\u4ee5\u6307\u5b9a\u5f3a\u5236\u62c6\u5305\u7684 NPM \u5305\u3002\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      forceSplitting: [/^@arco-design\\/web-react/],\n    },\n  },\n};\n")),(0,r.kt)("p",null,"\u76f8\u6bd4\u76f4\u63a5\u914d\u7f6e webpack \u7684 splitChunks\uff0c\u8fd9\u662f\u4e00\u4e2a\u66f4\u52a0\u7b80\u4fbf\u7684\u65b9\u5f0f\u3002"),(0,r.kt)("h3",{id:"chunksplitsplitchunks"},"chunkSplit.splitChunks"),(0,r.kt)("p",null,"\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"custom")," \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.splitChunks")," \u914d\u7f6e\u9879\u6765\u6307\u5b9a\u81ea\u5b9a\u4e49\u7684 webpack \u62c6\u5305\u914d\u7f6e\u3002\u6b64\u914d\u7f6e\u4f1a\u548c webpack \u7684 splitChunks \u914d\u7f6e\u8fdb\u884c\u5408\u5e76\uff08cacheGroups \u914d\u7f6e\u4e5f\u4f1a\u5408\u5e76\uff09\u3002\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'custom',\n      splitChunks: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n")),(0,r.kt)("h3",{id:"chunksplitoverride"},"chunkSplit.override"),(0,r.kt)("p",null,"\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-experience"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-module"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"split-by-size")," \u6216 ",(0,r.kt)("inlineCode",{parentName:"p"},"single-vendor")," \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.override")," \u914d\u7f6e\u9879\u6765\u81ea\u5b9a\u4e49 webpack \u62c6\u5305\u914d\u7f6e\uff0c\u6b64\u914d\u7f6e\u4f1a\u548c webpack \u7684 splitChunks \u914d\u7f6e\u8fdb\u884c\u5408\u5e76\uff08cacheGroups \u914d\u7f6e\u4e5f\u4f1a\u5408\u5e76\uff09\u3002\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    strategy: 'split-by-experience',\n    chunkSplit: {\n      override: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'\u5f53 Builder \u6784\u5efa "node" \u7c7b\u578b\u7684\u4ea7\u7269\u65f6\uff0c\u7531\u4e8e Node Bundles \u4e0d\u9700\u8981\u901a\u8fc7\u62c6\u5305\u6765\u4f18\u5316\u52a0\u8f7d\u6027\u80fd\uff0c\u56e0\u6b64 chunkSplit \u89c4\u5219\u4e0d\u4f1a\u751f\u6548\u3002')))}a.isMDXComponent=!0;const p={title:"performance.chunkSplit",sidebar_label:"chunkSplit"},o=void 0,c={unversionedId:"configure/app/performance/chunk-split",id:"configure/app/performance/chunk-split",title:"performance.chunkSplit",description:"\u8be5\u914d\u7f6e\u4e3a Modern.js Builder \u914d\u7f6e\uff0c\u8be6\u7ec6\u4fe1\u606f\u53ef\u53c2\u8003 performance.chunkSplit\u3002",source:"@site/../../packages/toolkit/main-doc/zh/configure/app/performance/chunk-split.md",sourceDirName:"configure/app/performance",slug:"/configure/app/performance/chunk-split",permalink:"/v2/docs/configure/app/performance/chunk-split",draft:!1,tags:[],version:"current",frontMatter:{title:"performance.chunkSplit",sidebar_label:"chunkSplit"},sidebar:"configsAppSidebar",previous:{title:"bundleAnalyze",permalink:"/v2/docs/configure/app/performance/bundle-analyze"},next:{title:"printFileSize",permalink:"/v2/docs/configure/app/performance/print-file-size"}},u={},k=[],m={toc:k};function s(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{title:"BUILDER",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u8be5\u914d\u7f6e\u4e3a Modern.js Builder \u914d\u7f6e\uff0c\u8be6\u7ec6\u4fe1\u606f\u53ef\u53c2\u8003 ",(0,r.kt)("a",{parentName:"p",href:"https://modernjs.dev/builder/zh/api/config-performance.html#performance-chunksplit"},"performance.chunkSplit"),"\u3002")),(0,r.kt)(a,{mdxType:"Main"}))}s.isMDXComponent=!0}}]);