"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7448],{44993:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(52983);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(f,a(a({ref:t},c),{},{components:n})):r.createElement(f,a({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var p=2;p<i;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},59601:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=n(18249),o=(n(52983),n(44993));const i={title:"source.entries",sidebar_label:"entries"},a=void 0,l={unversionedId:"configure/app/source/entries",id:"configure/app/source/entries",title:"source.entries",description:"* Type string ]: string | Object }",source:"@site/../../packages/toolkit/main-doc/en/docusaurus-plugin-content-docs/current/configure/app/source/entries.md",sourceDirName:"configure/app/source",slug:"/configure/app/source/entries",permalink:"/v2/en/docs/configure/app/source/entries",draft:!1,tags:[],version:"current",frontMatter:{title:"source.entries",sidebar_label:"entries"},sidebar:"configsAppSidebar",previous:{title:"entriesDir",permalink:"/v2/en/docs/configure/app/source/entries-dir"},next:{title:"exclude",permalink:"/v2/en/docs/configure/app/source/exclude"}},s={},p=[{value:"String",id:"string",level:2},{value:"Object",id:"object",level:2},{value:"Combine Entry",id:"combine-entry",level:2}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Type: ",(0,o.kt)("inlineCode",{parentName:"li"},"Object = { [ entryName: string ]: string | Object }")),(0,o.kt)("li",{parentName:"ul"},"Default: Default entry object dynamically settled according to the current project directory structure.")),(0,o.kt)("p",null,"For most scenarios, Modern.js automatically generated entries according to the directory structure can meet most business requirements. For details, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/guides/concept/entries"},"Entries"),"\u3002"),(0,o.kt)("p",null,"If you need to customize the build entry, you can specify it with this option."),(0,o.kt)("h2",{id:"string"},"String"),(0,o.kt)("p",null,"When the value is of type ",(0,o.kt)("inlineCode",{parentName:"p"},"string"),", the file path of the entry:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="modern.config.ts"',title:'"modern.config.ts"'},"import { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      // Specify a new entry named entry_customize\n      entry_customize: './src/home/test/index.js',\n    },\n  },\n});\n")),(0,o.kt)("p",null,"By default, the configured entry is equivalent to ",(0,o.kt)("inlineCode",{parentName:"p"},"App.[jt]sx"),", that is, the specified entry file only needs to export the root component of the application."),(0,o.kt)("p",null,"For example the following directory structure:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},".\n\u251c\u2500\u2500 src\n\u2502   \u2514\u2500\u2500 entry\n\u2502       \u251c\u2500\u2500 chat.tsx\n\u2502       \u2514\u2500\u2500 home.tsx\n\u2514\u2500\u2500 package.json\n")),(0,o.kt)("p",null,"With the content of the above default entry mechanism, Modern.js when analyzing the above directory, will not get any default entry."),(0,o.kt)("p",null,"In cases where you do not want to change the directory structure (such as project migration), you can customize the entry through ",(0,o.kt)("inlineCode",{parentName:"p"},"source.entries"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="modern.config.js"',title:'"modern.config.js"'},"export default defineConfig({\n  source: {\n    entries: {\n      home: './src/entry/home.tsx',\n      chat: './src/entry/chat.tsx',\n    },\n  },\n});\n")),(0,o.kt)("h2",{id:"object"},"Object"),(0,o.kt)("p",null,"When the value is ",(0,o.kt)("inlineCode",{parentName:"p"},"Object"),", the following properties can be configured:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"entry"),"\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"string"),"\uff0centry file path\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"disableMount"),"\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"boolean = false"),"\uff0cturn off Modern.js generate entry code\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"enableFileSystemRoutes"),"\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"boolean = false"),"\uff0c",(0,o.kt)("a",{parentName:"li",href:"/docs/apis/app/hooks/src/pages"},"Use Conventional Routing"),"\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="modern.config.ts"',title:'"modern.config.ts"'},"import { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      entry_customize: {\n        // entry file path\n        entry: './src/home/test/App.jsx',\n      },\n      // Use Conventional Routing\n      entry_spa: {\n        // The entry path of a conventional route must be set to a directory\n        entry: './src/about',\n        enableFileSystemRoutes: true,\n      },\n    },\n  },\n});\n")),(0,o.kt)("p",null,"By default, the configured entry is equivalent to ",(0,o.kt)("inlineCode",{parentName:"p"},"App.[jt]sx"),". If you want the entry to be equivalent to the entry in build mode, you can set the value to'Object' and the property ",(0,o.kt)("inlineCode",{parentName:"p"},"disableMount")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,o.kt)("h2",{id:"combine-entry"},"Combine Entry"),(0,o.kt)("p",null,"When ",(0,o.kt)("inlineCode",{parentName:"p"},"source.entries")," is specified, the Modern.js merges the user-defined entry with the default entry obtained by analyzing the directory structure. The merging rule is:"),(0,o.kt)("p",null,"Compare the entry path set by the custom entry with the default entry path. When the entry paths are the same, the custom entry will override the default entry."),(0,o.kt)("p",null,"For example the following directory structure:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},".\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 chat\n\u2502   \u2502   \u2514\u2500\u2500 App.jsx\n\u2502   \u2514\u2500\u2500 home\n\u2502       \u2514\u2500\u2500 index.js\n\u2514\u2500\u2500 package.json\n")),(0,o.kt)("p",null,"Modern.js analyze the ",(0,o.kt)("inlineCode",{parentName:"p"},"src/")," directory to get the default entries ",(0,o.kt)("inlineCode",{parentName:"p"},"chat")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"home"),". When the user configures the following in the ",(0,o.kt)("inlineCode",{parentName:"p"},"modern.config.js")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="modern.config.ts"',title:'"modern.config.ts"'},"import { defineConfig } from '@modern-js/app-tools';\n\nexport default defineConfig({\n  source: {\n    entries: {\n      index: './src/home/index.js',\n    },\n  },\n};\n")),(0,o.kt)("p",null,"You can see that the path of the custom entry ",(0,o.kt)("inlineCode",{parentName:"p"},"index")," is the same as the path of the default entry ",(0,o.kt)("inlineCode",{parentName:"p"},"home"),". During the merging process, ",(0,o.kt)("inlineCode",{parentName:"p"},"index")," will override ",(0,o.kt)("inlineCode",{parentName:"p"},"home"),", and the final entry is as follows:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"chat -> ./src/chat/App.jsx")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"index -> ./src/home/index.js"))))}u.isMDXComponent=!0}}]);