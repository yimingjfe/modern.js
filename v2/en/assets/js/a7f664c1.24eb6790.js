"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1474],{44993:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>u});var o=r(52983);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),p=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),m=p(r),u=n,g=m["".concat(l,".").concat(u)]||m[u]||s[u]||a;return r?o.createElement(g,i(i({ref:t},d),{},{components:r})):o.createElement(g,i({ref:t},d))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var p=2;p<a;p++)i[p]=r[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5414:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>s,frontMatter:()=>a,metadata:()=>c,toc:()=>p});var o=r(18249),n=(r(52983),r(44993));const a={sidebar_position:3},i="Develop a microgenerator project",c={unversionedId:"guides/topic-detail/generator/codesmith/develop",id:"guides/topic-detail/generator/codesmith/develop",title:"Develop a microgenerator project",description:"Create project",source:"@site/../../packages/toolkit/main-doc/en/docusaurus-plugin-content-docs/current/guides/topic-detail/generator/codesmith/develop.md",sourceDirName:"guides/topic-detail/generator/codesmith",slug:"/guides/topic-detail/generator/codesmith/develop",permalink:"/v2/en/docs/guides/topic-detail/generator/codesmith/develop",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"guidesSidebar",previous:{title:"The composition of the microgenerator",permalink:"/v2/en/docs/guides/topic-detail/generator/codesmith/structure"},next:{title:"Execute microgenerator with JS code",permalink:"/v2/en/docs/guides/topic-detail/generator/codesmith/run-in-js"}},l={},p=[{value:"Create project",id:"create-project",level:2},{value:"Add template file",id:"add-template-file",level:2},{value:"Develop generator core logic",id:"develop-generator-core-logic",level:2},{value:"Test microgenerator",id:"test-microgenerator",level:2},{value:"Run the microgenerator",id:"run-the-microgenerator",level:2}],d={toc:p};function s(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"develop-a-microgenerator-project"},"Develop a microgenerator project"),(0,n.kt)("h2",{id:"create-project"},"Create project"),(0,n.kt)("p",null,"Modern.js provides a microgenerator to create a microgenerator project, you can directly create a microgenerator project with the following commands:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$ mkdir <projectDir>\n$ npx @modern-js/codesmith-cli @modern-js/generator-generator\n\n? Package Name <generatorName>\n? Package Management Tool pnpm\n? Development Language TS\n")),(0,n.kt)("h2",{id:"add-template-file"},"Add template file"),(0,n.kt)("p",null,"In the templates folder of the project directory, it is used to store the template files required by the generator. If there is no template file, this step can be skipped."),(0,n.kt)("h2",{id:"develop-generator-core-logic"},"Develop generator core logic"),(0,n.kt)("p",null,"In the project generated by default, it has been implemented to directly copy the templates directory file to the target project, and the core logic development of the generator can be completed directly in the ",(0,n.kt)("inlineCode",{parentName:"p"},"handleTemplateFile")," function."),(0,n.kt)("h2",{id:"test-microgenerator"},"Test microgenerator"),(0,n.kt)("p",null,"After the development of the microgenerator is completed, you need to execute ",(0,n.kt)("inlineCode",{parentName:"p"},"pnpm run build")," to compile the code. In development mode, you can use ",(0,n.kt)("inlineCode",{parentName:"p"},"pnpm run build --watch"),"."),(0,n.kt)("p",null,"Codesmith provides the cli tool for running and testing the microgenerator. Execute it in the target directory with the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"npx @modern-js/codesmith-cli <generatorPath>\n")),(0,n.kt)("p",null,"Where ",(0,n.kt)("inlineCode",{parentName:"p"},"generatorPath")," is the absolute path of the above generator project."),(0,n.kt)("h2",{id:"run-the-microgenerator"},"Run the microgenerator"),(0,n.kt)("p",null,"After the generator publishes to npm, use the following command to execute:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"npx @modern-js/codesmith-cli <generatorName>\n")),(0,n.kt)("p",null,"Where generatorName is the generator package name."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("inlineCode",{parentName:"p"},"@modern-js/create")," also supports running micro-generators, you can use ",(0,n.kt)("inlineCode",{parentName:"p"},"npx @modern-js/create --generator <generatorName>")," to run customized micro-generators.")))}s.isMDXComponent=!0}}]);