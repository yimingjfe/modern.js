"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9121],{44993:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var i=t(52983);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,l=function(e,n){if(null==e)return{};var t,i,l={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=i.createContext({}),c=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=c(e.components);return i.createElement(o.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=c(t),k=l,d=m["".concat(o,".").concat(k)]||m[k]||s[k]||r;return t?i.createElement(d,a(a({ref:n},u),{},{components:t})):i.createElement(d,a({ref:n},u))}));function k(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,a=new Array(r);a[0]=m;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,a[1]=p;for(var c=2;c<r;c++)a[c]=t[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},13903:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>k,frontMatter:()=>p,metadata:()=>c,toc:()=>s});var i=t(18249),l=(t(52983),t(44993));const r={toc:[{value:"chunkSplit.strategy",id:"chunksplitstrategy",level:3},{value:"chunkSplit.minSize",id:"chunksplitminsize",level:3},{value:"chunkSplit.maxSize",id:"chunksplitmaxsize",level:3},{value:"chunkSplit.forceSplitting",id:"chunksplitforcesplitting",level:3},{value:"chunkSplit.splitChunks",id:"chunksplitsplitchunks",level:3},{value:"chunkSplit.override",id:"chunksplitoverride",level:3}]};function a(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,i.Z)({},r,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"Object")),(0,l.kt)("li",{parentName:"ul"},"Default: ",(0,l.kt)("inlineCode",{parentName:"li"},"{ strategy: 'split-by-experience' }"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit")," is used to configure the chunk splitting strategy. The type of ",(0,l.kt)("inlineCode",{parentName:"p"},"ChunkSplit")," is as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface BaseChunkSplit {\n  strategy?:\n    | 'split-by-module'\n    | 'split-by-experience'\n    | 'all-in-one'\n    | 'single-vendor';\n  override?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\ninterface SplitBySize {\n  strategy?: 'split-by-size';\n  minSize?: number;\n  maxSize?: number;\n  override?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\ninterface SplitCustom {\n  strategy?: 'custom';\n  splitChunks?: SplitChunks;\n  forceSplitting?: Array<RegExp>;\n}\n\nexport type ChunkSplit = BaseChunkSplit | SplitBySize | SplitCustom;\n")),(0,l.kt)("h3",{id:"chunksplitstrategy"},"chunkSplit.strategy"),(0,l.kt)("p",null,"Builder provides the following chunk splitting strategies:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"split-by-experience"),": split by experience, the default strategy"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"split-by-module"),": split a chunk per npm package"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"split-by-size"),": split by chunk size"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"all-in-one"),": all code is bundled into a single chunk"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"single-vendor"),": The code in node_modules is bundled into a single chunk"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"custom"),": custom chunk splitting strategy")),(0,l.kt)("p",null,"Builder use ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-experience")," strategy by default, in which the following npm package group will be split into a single chunk:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"react")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"react-dom")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"react-router"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"history")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"react-router-dom")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"antd")," component library"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"semi")," component library"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"arco")," component library"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@babel/runtime")," (including ",(0,l.kt)("inlineCode",{parentName:"li"},"@babel/runtime-corejs2"),"\u3001 ",(0,l.kt)("inlineCode",{parentName:"li"},"@babel/runtime-corejs3"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lodash"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"lodash-es")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"core-js"))),(0,l.kt)("p",null,"If you want to use other splitting strategies, you can specify it via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy"),"."),(0,l.kt)("h3",{id:"chunksplitminsize"},"chunkSplit.minSize"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"number")),(0,l.kt)("li",{parentName:"ul"},"Default: ",(0,l.kt)("inlineCode",{parentName:"li"},"10000"))),(0,l.kt)("p",null,"When ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-size"),", you can specify the minimum size of a chunk via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.minSize"),", the unit is bytes. The default value is ",(0,l.kt)("inlineCode",{parentName:"p"},"10000"),". For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      minSize: 20000,\n    },\n  },\n};\n")),(0,l.kt)("h3",{id:"chunksplitmaxsize"},"chunkSplit.maxSize"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"number")),(0,l.kt)("li",{parentName:"ul"},"Default: ",(0,l.kt)("inlineCode",{parentName:"li"},"Infinity"))),(0,l.kt)("p",null,"When ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-size"),", you can specify the maximum size of a chunk via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.maxSize"),", the unit is bytes. The default value is ",(0,l.kt)("inlineCode",{parentName:"p"},"Infinity"),". For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'split-by-size',\n      maxSize: 50000,\n    },\n  },\n};\n")),(0,l.kt)("h3",{id:"chunksplitforcesplitting"},"chunkSplit.forceSplitting"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"Array<RegExp>")),(0,l.kt)("li",{parentName:"ul"},"Default: ",(0,l.kt)("inlineCode",{parentName:"li"},"[]"))),(0,l.kt)("p",null,"Via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.forceSplitting"),", you can specify the NPM packages that need to be forced to split. For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      forceSplitting: [/^@arco-design\\/web-react/],\n    },\n  },\n};\n")),(0,l.kt)("p",null,"This is an easier way than configuring webpack's splitChunks directly."),(0,l.kt)("h3",{id:"chunksplitsplitchunks"},"chunkSplit.splitChunks"),(0,l.kt)("p",null,"When ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"custom"),", you can specify the custom webpack chunk splitting config via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.splitChunks"),". This config will be merged with the webpack splitChunks config (the ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheGroups")," config will also be merged). For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    chunkSplit: {\n      strategy: 'custom',\n      splitChunks: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n")),(0,l.kt)("h3",{id:"chunksplitoverride"},"chunkSplit.override"),(0,l.kt)("p",null,"When ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.strategy")," is ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-experience"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-module"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"split-by-size")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"single-vendor"),", you can specify the custom webpack chunk splitting config via ",(0,l.kt)("inlineCode",{parentName:"p"},"performance.chunkSplit.override"),". This config will be merged with the webpack splitChunks config (the ",(0,l.kt)("inlineCode",{parentName:"p"},"cacheGroups")," config will also be merged). For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  performance: {\n    strategy: 'split-by-experience',\n    chunkSplit: {\n      override: {\n        cacheGroups: {\n          react: {\n            test: /[\\\\/]node_modules[\\\\/](react|react-dom)[\\\\/]/,\n            name: 'react',\n            chunks: 'all',\n          },\n        },\n      },\n    },\n  },\n};\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},'When the Builder target is "node", since Node Bundles do not need to be splitted to optimize loading performance, the chunkSplit rule will not take effect.')))}a.isMDXComponent=!0;const p={title:"performance.chunkSplit",sidebar_label:"chunkSplit"},o=void 0,c={unversionedId:"configure/app/performance/chunk-split",id:"configure/app/performance/chunk-split",title:"performance.chunkSplit",description:"This configuration is Modern.js Builder configuration, more detail can see performance.chunkSplit\u3002",source:"@site/../../packages/toolkit/main-doc/en/docusaurus-plugin-content-docs/current/configure/app/performance/chunk-split.md",sourceDirName:"configure/app/performance",slug:"/configure/app/performance/chunk-split",permalink:"/v2/en/docs/configure/app/performance/chunk-split",draft:!1,tags:[],version:"current",frontMatter:{title:"performance.chunkSplit",sidebar_label:"chunkSplit"},sidebar:"configsAppSidebar",previous:{title:"bundleAnalyze",permalink:"/v2/en/docs/configure/app/performance/bundle-analyze"},next:{title:"printFileSize",permalink:"/v2/en/docs/configure/app/performance/print-file-size"}},u={},s=[],m={toc:s};function k(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("admonition",{title:"BUILDER",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"This configuration is Modern.js Builder configuration, more detail can see ",(0,l.kt)("a",{parentName:"p",href:"https://modernjs.dev/builder/zh/api/config-performance.html#performance-chunksplit"},"performance.chunkSplit"),"\u3002")),(0,l.kt)(a,{mdxType:"Main"}))}k.isMDXComponent=!0}}]);