"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1528],{44993:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(52983);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=r.createContext({}),c=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(i.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(t),f=a,m=d["".concat(i,".").concat(f)]||d[f]||u[f]||o;return t?r.createElement(m,l(l({ref:n},p),{},{components:t})):r.createElement(m,l({ref:n},p))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=d;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<o;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},19481:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>f,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=t(18249),a=(t(52983),t(44993));const o={toc:[{value:"Example",id:"example",level:4}]};function l(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Type: ",(0,a.kt)("inlineCode",{parentName:"li"},"Record<string, JSONValue>")),(0,a.kt)("li",{parentName:"ul"},"Default:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const defaultGlobalVars = {\n  // The environment variable `process.env.NODE_ENV` will be added by default,\n  // so you don't need to set it in manually.\n  'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n};\n")),(0,a.kt)("p",null,"Define global variables. It can replace expressions like ",(0,a.kt)("inlineCode",{parentName:"p"},"process.env.FOO")," in your code after compile. Such as:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"console.log(process.env.NODE_ENV);\n\n// \u2b07\ufe0f Turn into being...\nconsole.log('development');\n")),(0,a.kt)("p",null,"Doesn't works with destructuring assignment, because builder does not know if ",(0,a.kt)("inlineCode",{parentName:"p"},"NODE_ENV")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV")," are associated:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { NODE_ENV } = process.env;\nconsole.log(NODE_ENV);\n// \u274c Won't get a string.\n")),(0,a.kt)("p",null,"You can take ",(0,a.kt)("inlineCode",{parentName:"p"},"source.globalVars")," as the syntax sugar of ",(0,a.kt)("inlineCode",{parentName:"p"},"source.define"),", the only difference is that ",(0,a.kt)("inlineCode",{parentName:"p"},"source.globalVars")," will automatically stringify the value, which makes it easier to set the value of global variables. The values of ",(0,a.kt)("inlineCode",{parentName:"p"},"globalVars")," should be JSON-safe to ensure it can be serialized."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  source: {\n    globalVars: {\n      'process.env.BUILD_VERSION': '0.0.1',\n      'import.meta.foo': { bar: 42 },\n      'import.meta.baz': false,\n    },\n    define: {\n      'process.env.BUILD_VERSION': JSON.stringify('0.0.1'),\n      'import.meta': {\n        foo: JSON.stringify({ bar: 42 }),\n        baz: JSON.stringify(false),\n      },\n    },\n  },\n};\n")),(0,a.kt)("h4",{id:"example"},"Example"),(0,a.kt)("p",null,"Add the following config to use:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export default {\n  source: {\n    globalVars: {\n      ENABLE_VCONSOLE: true,\n      APP_CONTEXT: { answer: 42 },\n    },\n  },\n};\n")))}l.isMDXComponent=!0;const s={title:"source.globalVars",sidebar_label:"globalVars"},i=void 0,c={unversionedId:"configure/app/source/global-vars",id:"configure/app/source/global-vars",title:"source.globalVars",description:"This configuration is Modern.js Builder configuration, more detail can see source.globalVars\u3002",source:"@site/../../packages/toolkit/main-doc/en/docusaurus-plugin-content-docs/current/configure/app/source/global-vars.md",sourceDirName:"configure/app/source",slug:"/configure/app/source/global-vars",permalink:"/v2/en/docs/configure/app/source/global-vars",draft:!1,tags:[],version:"current",frontMatter:{title:"source.globalVars",sidebar_label:"globalVars"},sidebar:"configsAppSidebar",previous:{title:"exclude",permalink:"/v2/en/docs/configure/app/source/exclude"},next:{title:"include",permalink:"/v2/en/docs/configure/app/source/include"}},p={},u=[],d={toc:u};function f(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{title:"BUILDER",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This configuration is Modern.js Builder configuration, more detail can see ",(0,a.kt)("a",{parentName:"p",href:"https://modernjs.dev/builder/en/api/config-source.html#source-globalvars"},"source.globalVars"),"\u3002")),(0,a.kt)(l,{mdxType:"Main"}))}f.isMDXComponent=!0}}]);