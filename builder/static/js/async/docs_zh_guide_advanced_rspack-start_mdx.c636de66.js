(self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).push([["docs_zh_guide_advanced_rspack-start_mdx"],{66322:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(e,r){for(var n in r)Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}(r,{frontmatter:function(){return l},title:function(){return a},toc:function(){return d},default:function(){return t}});var s=n("9880"),i=n("23169"),c=n.ir(n("74215")),l={},a="使用 Rspack",d=[{text:"启用 Rspack",depth:2,id:"启用-rspack"},{text:"在 Modern.js 框架中启用",depth:3,id:"在-modernjs-框架中启用"},{text:"在前端框架中接入",depth:3,id:"在前端框架中接入"},{text:"从 webpack 迁移到 Rspack",depth:2,id:"从-webpack-迁移到-rspack"},{text:"1. Builder 配置差异",depth:3,id:"1-builder-配置差异"},{text:"Source Config",depth:4,id:"source-config"},{text:"Html Config",depth:4,id:"html-config"},{text:"Security Config",depth:4,id:"security-config"},{text:"Dev Config",depth:4,id:"dev-config"},{text:"Output Config",depth:4,id:"output-config"},{text:"Experiments Config",depth:4,id:"experiments-config"},{text:"Performance Config",depth:4,id:"performance-config"},{text:"Tools Config",depth:4,id:"tools-config"},{text:"2. 从 tools.webpackChain 迁移至 tools.bundlerChain",depth:3,id:"2-从-toolswebpackchain-迁移至-toolsbundlerchain"},{text:"CHAIN_ID 差异",depth:4,id:"chain_id-差异"},{text:"3. 从 tools.webpack 迁移至 tools.rspack",depth:3,id:"3-从-toolswebpack-迁移至-toolsrspack"},{text:"4. Babel 配置迁移",depth:3,id:"4-babel-配置迁移"},{text:"5. SWC 配置支持",depth:3,id:"5-swc-配置支持"},{text:"6. Webpack Plugin 插件迁移",depth:3,id:"6-webpack-plugin-插件迁移"},{text:"常见问题",depth:2,id:"常见问题"},{text:"启用 Rspack 构建后，性能没有预期的快？",depth:3,id:"启用-rspack-构建后，性能没有预期的快？"}];function o(e){var r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",code:"code",pre:"pre",h4:"h4",blockquote:"blockquote",ul:"ul",li:"li",div:"div",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",br:"br",strong:"strong",h5:"h5"},(0,i.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"使用-rspack",children:["使用 Rspack",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#使用-rspack",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"这篇文档会向你介绍如何在 Builder 中开启 Rspack 构建模式。"}),"\n","\n",(0,s.jsx)(c.default,{}),"\n",(0,s.jsxs)(r.h2,{id:"启用-rspack",children:["启用 Rspack",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#启用-rspack",children:"#"})]}),"\n",(0,s.jsxs)(r.h3,{id:"在-modernjs-框架中启用",children:["在 Modern.js 框架中启用",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#在-modernjs-框架中启用",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Modern.js 框架默认使用 webpack 作为打包工具。如果希望启用 Rspack 作为打包工具，可参考：",(0,s.jsx)(r.a,{href:"https://modernjs.dev/guides/advanced-features/rspack-start.html",target:"_blank",rel:"noopener noreferrer",children:"使用 Rspack"}),"。"]}),"\n",(0,s.jsxs)(r.h3,{id:"在前端框架中接入",children:["在前端框架中接入",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#在前端框架中接入",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["如果你基于 Builder 开发了一个前端框架，接入 rspack-provider 和 ",(0,s.jsx)(r.a,{href:"/guide/quick-start#%E5%9C%A8%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%B8%AD%E6%8E%A5%E5%85%A5",children:"接入 webpack-provider"})," 的方式类似，只需要把依赖从 ",(0,s.jsx)(r.code,{children:"@modern-js/builder-webpack-provider"})," 改为 ",(0,s.jsx)(r.code,{children:"@modern-js/builder-rspack-provider"})," 即可。"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",meta:"title=modern.config.ts",children:"import { createBuilder } from '@modern-js/builder';\nimport { builderRspackProvider } from '@modern-js/builder-rspack-provider';\n\nconst provider = builderRspackProvider({\n  builderConfig: {\n    // some configs\n  },\n});\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-diff",meta:"title=package.json",children:'{\n  "devDependencies": {\n-    "@modern-js/builder-webpack-provider": "2.8.0",\n+    "@modern-js/builder-rspack-provider": "2.8.0"\n  }\n}\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"从-webpack-迁移到-rspack",children:["从 webpack 迁移到 Rspack",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#从-webpack-迁移到-rspack",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Builder 旨在消除不同打包工具之间的主要差异，帮助用户以较低成本进行迁移。但由于各个打包工具提供的能力不同，你仍需要了解其中的部分差异。"}),"\n",(0,s.jsxs)(r.p,{children:["本文将从 Builder 的角度介绍 webpack 和 Rspack 之间的区别。如果需要了解更深层次的差异，请参考 ",(0,s.jsx)(r.a,{href:"http://rspack.dev/zh/guide/migrate-from-webpack.html",target:"_blank",rel:"noopener noreferrer",children:"Rspack 文档"}),"。"]}),"\n",(0,s.jsxs)(r.h3,{id:"1-builder-配置差异",children:["1. Builder 配置差异",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#1-builder-配置差异",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"目前，Builder 内大部分的配置项已经适配了 Rspack，但仍有部分配置在支持中。"}),"\n",(0,s.jsxs)(r.h4,{id:"source-config",children:["Source Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#source-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与源代码解析、编译方式相关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项及能力包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-source#sourceinclude",children:"source.include"})," (",(0,s.jsx)(r.a,{href:"https://github.com/web-infra-dev/rspack/issues/3067",target:"_blank",rel:"noopener noreferrer",children:"issue 追踪"}),")"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-source#sourceexclude",children:"source.exclude"})," (",(0,s.jsx)(r.a,{href:"https://github.com/web-infra-dev/rspack/issues/3067",target:"_blank",rel:"noopener noreferrer",children:"issue 追踪"}),")"]}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-source#sourcemodulescopes",children:"source.moduleScopes"})}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"html-config",children:["Html Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#html-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与 HTML 有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"所有 html 下的配置项及能力在 Rspack 内均可使用。"}),"\n",(0,s.jsxs)(r.h4,{id:"security-config",children:["Security Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#security-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与安全有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项及能力包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-security#securitysri",children:"source.sri"})," (",(0,s.jsx)(r.a,{href:"https://github.com/web-infra-dev/rspack/issues/2669",target:"_blank",rel:"noopener noreferrer",children:"issue 追踪"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"dev-config",children:["Dev Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#dev-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与本地开发有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"所有 dev 下的配置项及能力在 Rspack 内均可使用。"}),"\n",(0,s.jsxs)(r.h4,{id:"output-config",children:["Output Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#output-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与构建产物有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项及能力包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-output#outputdisablecssextract",children:"output.disableCssExtract"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-output#outputdisablesourcemap",children:"output.disableSourcemap.css"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-output#outputenablecssmoduletsdeclaration",children:"output.enableCssModuleTSDeclaration"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-output#outputenableinlinescripts",children:"output.enableInlineScripts"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-output#outputlegalcomments",children:"output.legalComments.inline"})}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-output#usage",children:"output.polyfill.usage"})," (",(0,s.jsx)(r.a,{href:"https://github.com/web-infra-dev/rspack/issues/3067",target:"_blank",rel:"noopener noreferrer",children:"issue 追踪"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"experiments-config",children:["Experiments Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#experiments-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中的一些实验性配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项及能力包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-experiments#experimentslazycompilation",children:"experiments.lazyCompilation"})}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"performance-config",children:["Performance Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#performance-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与性能有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项及能力包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-performance#performanceprofile",children:"performance.profile"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-performance#performanceremovemomentlocale",children:"performance.removeMomentLocale"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-performance#performancebuildcache",children:"performance.buildCache"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-performance#performancechunksplit",children:"performance.chunkSplit (split-by-module)"})}),"\n"]}),"\n",(0,s.jsxs)(r.h4,{id:"tools-config",children:["Tools Config",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#tools-config",children:"#"})]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"Builder 中与底层工具有关的配置。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"不支持的配置项包括："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolsterser",children:"tools.terser"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolscssextract",children:"tools.cssExtract"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolscssloader",children:"tools.cssLoader"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolsinspector",children:"tools.inspector"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolsminifycss",children:"tools.minifyCss"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolsstyleloader",children:"tools.styleLoader"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolsstyledcomponents",children:"tools.styledComponents"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/api/config-tools#toolstsloader",children:"tools.tsLoader"})}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-tools#toolswebpack",children:"tools.webpack"}),"：使用 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsrspack",children:"tools.rspack"})," 代替。"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"/api/config-tools#toolswebpackchain",children:"tools.webpackChain"}),"：使用 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsbundlerchain",children:"tools.bundlerChain"})," 代替。"]}),"\n"]}),"\n",(0,s.jsxs)(r.div,{className:"modern-directive tip",children:[(0,s.jsx)(r.div,{className:"modern-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"modern-directive-content",children:(0,s.jsx)(r.p,{children:"除上述配置外，一些已支持的配置可能存在能力差异，请参考各配置 API 获取具体差异信息。"})})]}),"\n",(0,s.jsxs)(r.h3,{id:"2-从-toolswebpackchain-迁移至-toolsbundlerchain",children:["2. 从 tools.webpackChain 迁移至 tools.bundlerChain",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#2-从-toolswebpackchain-迁移至-toolsbundlerchain",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Builder 支持通过 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsbundlerchain",children:"bundlerChain"})," 来修改 Rspack config。通过 bundlerChain 修改的配置，在 webpack 和 Rspack 构建时均可生效。"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-diff",children:"export default {\n  tools: {\n-   webpackChain: (chain, { env }) => {\n+   bundlerChain: (chain, { env }) => {\n      if (env === 'development') {\n        chain.devtool('cheap-module-eval-source-map');\n      }\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(r.div,{className:"modern-directive tip",children:[(0,s.jsx)(r.div,{className:"modern-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"modern-directive-content",children:(0,s.jsx)(r.p,{children:"bundlerChain 只为 Rspack & webpack 配置提供一致的 api 修改方式，实际 plugin / loader 是否可用，需要看 Rspack / webpack 实际支持情况。"})})]}),"\n",(0,s.jsxs)(r.h4,{id:"chain_id-差异",children:["CHAIN_ID 差异",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#chain_id-差异",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"因为 webpack 和 Rspack 的一些实现差异，所以在规则配置上会有些不同。"}),"\n",(0,s.jsxs)(r.p,{children:["可通过 ",(0,s.jsx)(r.a,{href:"/api/config-tools#chain_id",children:"tools.bundlerChain#CHAIN_ID"})," 查看所有在 Rspack & webpack 中都支持的规则。"]}),"\n",(0,s.jsxs)(r.h3,{id:"3-从-toolswebpack-迁移至-toolsrspack",children:["3. 从 tools.webpack 迁移至 tools.rspack",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#3-从-toolswebpack-迁移至-toolsrspack",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["BundlerChain 只支持修改 Rspack & webpack 交集部分，更多 Rspack 独有功能，需要通过 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsrspack",children:"tools.rspack"})," 修改。"]}),"\n",(0,s.jsxs)(r.p,{children:["在修改 Rspack 配置之前，你可能需要了解 ",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/guide/config-diff.html",target:"_blank",rel:"noopener noreferrer",children:"Rspack 和 Webpack 的配置兼容性"}),"。"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-diff",children:"export default {\n  tools: {\n-   webppack: (config, { env }) => {\n+   rspack: (config, { env }) => {\n      if (env === 'development') {\n        config.devtool = 'cheap-module-eval-source-map';\n      }\n      return config;\n    },\n  },\n};\n"})}),"\n",(0,s.jsxs)(r.p,{children:["关于 Rspack 的详细配置信息，请参考 ",(0,s.jsx)(r.a,{href:"https://rspack.dev/",target:"_blank",rel:"noopener noreferrer",children:"Rspack 官网"}),"。"]}),"\n",(0,s.jsxs)(r.h3,{id:"4-babel-配置迁移",children:["4. Babel 配置迁移",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#4-babel-配置迁移",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Rspack 默认会使用 SWC 进行转译和压缩，因此，在启用 Rspack 构建时，babel-loader 默认不会被启用。"}),"\n",(0,s.jsx)(r.p,{children:"对于大部分常见的 Babel 插件，你可以在 Rspack 中找到对应的替代品，同时 Builder 也提供了一些相应的配置项。"}),"\n",(0,s.jsxs)(r.table,{children:["\n",(0,s.jsxs)(r.thead,{children:["\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.th,{children:"Babel 插件"}),"\n",(0,s.jsx)(r.th,{children:"Rspack 配置项"}),"\n",(0,s.jsx)(r.th,{children:"Builder 配置项"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.tbody,{children:["\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"@babel/preset-env"}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinspresetenv",target:"_blank",rel:"noopener noreferrer",children:"builtins.presetEnv"})}),"\n",(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.a,{href:"/guide/advanced/browserslist",children:"设置浏览器范围"}),"、",(0,s.jsx)("br",{}),(0,s.jsx)(r.a,{href:"/guide/advanced/browser-compatibility",children:"浏览器兼容性"})]}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"@babel/preset-react"}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinsreact",target:"_blank",rel:"noopener noreferrer",children:"builtins.react"})}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/guide/advanced/hmr",children:"模块热替换"})}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"@emotion/babel-plugin"}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinsemotion",target:"_blank",rel:"noopener noreferrer",children:"builtins.emotion"})}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"babel-plugin-import"}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinspluginimport",target:"_blank",rel:"noopener noreferrer",children:"builtins.pluginImport"})}),"\n",(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"/api/config-source#sourcetransformimport",children:"source.transformImport"})}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"babel-plugin-lodash"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"babel-plugin-styled-components"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n"]}),"\n",(0,s.jsxs)(r.tr,{children:["\n",(0,s.jsx)(r.td,{children:"@babel/plugin-react-transform-remove-prop-types"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n",(0,s.jsx)(r.td,{children:"暂无"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.div,{className:"modern-directive tip",children:[(0,s.jsx)(r.div,{className:"modern-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"modern-directive-content",children:(0,s.jsxs)(r.p,{children:["在使用 Rspack 构建时，仍然",(0,s.jsxs)(r.strong,{children:["支持通过 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsbabel",children:"tools.babel"})," 配置 Babel 插件"]}),"，但会产生额外的编译开销，在一定程度上拖慢 Rspack 构建速度。\n"]})})]}),"\n",(0,s.jsxs)(r.h3,{id:"5-swc-配置支持",children:["5. SWC 配置支持",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#5-swc-配置支持",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Rspack 中已内置了一部分的 swc 配置支持，如 builtins.react 等，可参考 ",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html",target:"_blank",rel:"noopener noreferrer",children:"Builtins"}),"。"]}),"\n",(0,s.jsxs)(r.p,{children:["暂不支持在 Rspack 中添加 swc 插件和更多自定义配置，相关需求可追踪对应 ",(0,s.jsx)(r.a,{href:"https://github.com/web-infra-dev/rspack/issues/3067",target:"_blank",rel:"noopener noreferrer",children:"issue 进度"}),"。"]}),"\n",(0,s.jsxs)(r.h3,{id:"6-webpack-plugin-插件迁移",children:["6. Webpack Plugin 插件迁移",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#6-webpack-plugin-插件迁移",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"目前 Rspack 中兼容的 webpack 插件有限，当你的项目中有用到以下插件（或间接依赖）时，需要暂时将该插件移除或使用替代方案，否则不支持切换至 Rspack 构建："}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["webpack-retry-chunk-load-plugin：使用 ",(0,s.jsx)(r.a,{href:"/api/config-output#outputassetsretry",children:"output.assetsRetry"})," 代替。"]}),"\n",(0,s.jsxs)(r.li,{children:["webpack.ProviderPlugin：使用 ",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinsprovide",target:"_blank",rel:"noopener noreferrer",children:"builtins.provide"})," 代替。"]}),"\n",(0,s.jsxs)(r.li,{children:["webpack.DefinePlugin：使用 ",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/config/builtins.html#builtinsdefine",target:"_blank",rel:"noopener noreferrer",children:"builtins.define"})," 代替。"]}),"\n",(0,s.jsx)(r.li,{children:"webpack.ContextReplacementPlugin"}),"\n",(0,s.jsx)(r.li,{children:"..."}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["具体插件支持情况可参考：",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/guide/plugin-compat.html",target:"_blank",rel:"noopener noreferrer",children:"Plugin 兼容情况"}),"。"]}),"\n",(0,s.jsxs)(r.p,{children:["未列出的插件可根据 ",(0,s.jsx)(r.a,{href:"https://www.rspack.dev/zh/api/plugin-api.html",target:"_blank",rel:"noopener noreferrer",children:"Rspack Plugin API 支持情况"})," 自行判断。"]}),"\n",(0,s.jsxs)(r.h2,{id:"常见问题",children:["常见问题",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#常见问题",children:"#"})]}),"\n",(0,s.jsxs)(r.h3,{id:"启用-rspack-构建后，性能没有预期的快？",children:["启用 Rspack 构建后，性能没有预期的快？",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#启用-rspack-构建后，性能没有预期的快？",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"通常情况下，启用 Rspack 后，相较 Webpack 会有 5 到 10 倍的编译性能提升。"}),"\n",(0,s.jsx)(r.p,{children:"目前已知以下行为会在一定程度上拖慢 Rspack 构建性能："}),"\n",(0,s.jsxs)(r.h5,{id:"使用依赖-babel-实现的配置项或插件",children:["使用依赖 Babel 实现的配置项或插件",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#使用依赖-babel-实现的配置项或插件",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["在使用 Rspack 构建时，Builder 默认不会启用 ",(0,s.jsx)(r.code,{children:"babel-loader"}),"。但当项目中使用到依赖 Babel 实现的配置项或插件时，会额外添加 ",(0,s.jsx)(r.code,{children:"babel-loader"})," 进行文件转译："]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["通过 ",(0,s.jsx)(r.a,{href:"/api/config-tools#toolsbabel",children:"tools.babel"})," 添加 Babel plugin"]}),"\n",(0,s.jsxs)(r.li,{children:["使用 ",(0,s.jsx)(r.a,{href:"https://modernjs.dev/guides/advanced-features/ssr.html",target:"_blank",rel:"noopener noreferrer",children:"Modern.js SSR 功能"})]}),"\n",(0,s.jsx)(r.li,{children:"..."}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["你可以通过开启",(0,s.jsx)(r.a,{href:"/guide/debug/debug-mode",children:"调试模式"})," 来查看最终生成的 Rspack 配置中是否存在 Babel 插件。"]}),"\n",(0,s.jsxs)(r.h5,{id:"开启-typescript-类型检查",children:["开启 TypeScript 类型检查",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#开启-typescript-类型检查",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"Builder 构建时会默认开启 TypeScript 类型检查。在大型项目中，类型检查的耗时可能远超过 Rspack 本身的构建耗时，因此在生产环境构建时，该行为会在一定程度上拖慢构建速度。"}),"\n",(0,s.jsxs)(r.p,{children:["此时，可通过 ",(0,s.jsx)(r.a,{href:"/api/config-output#outputdisabletschecker",children:"output.disableTsChecker"})," 关闭类型检查，以查看排除类型检查后 Rspack 性能是否符合预期。"]}),"\n",(0,s.jsxs)(r.h5,{id:"大量-less-文件",children:["大量 Less 文件",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#大量-less-文件",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["目前 Less 文件使用基于 JavaScript 实现的 ",(0,s.jsx)(r.code,{children:"less-loader"})," 进行处理，未提供 Rust 版本，因此在处理大量 Less 文件时会拖累构建性能。"]}),"\n",(0,s.jsxs)(r.div,{className:"modern-directive tip",children:[(0,s.jsx)(r.div,{className:"modern-directive-title",children:"TIP"}),(0,s.jsx)(r.div,{className:"modern-directive-content",children:(0,s.jsxs)(r.p,{children:["在使用 ",(0,s.jsx)(r.a,{href:"https://www.npmjs.com/package/@arco-design/web-react",target:"_blank",rel:"noopener noreferrer",children:"Arco Design"})," 等组件库时，请尽量避免全量引入 Less 样式。你可以改为按需引入，或直接引入 CSS 样式。\n"]})})]}),"\n",(0,s.jsxs)(r.h5,{id:"大量-svg-文件",children:["大量 SVG 文件",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#大量-svg-文件",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["Builder 默认支持将 SVG 资源作为 React 组件使用，这会产生一定的性能开销。如果你不需要此能力，可以将 ",(0,s.jsx)(r.a,{href:"/api/config-output#outputdisablesvgr",children:"output.disableSvgr"})," 设置为 ",(0,s.jsx)(r.code,{children:"true"})," 来关闭此行为，以提升构建性能。"]}),"\n",(0,s.jsxs)(r.h5,{id:"组件库未按需引入",children:["组件库未按需引入",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#组件库未按需引入",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["默认情况下，在使用 ",(0,s.jsx)(r.a,{href:"https://www.npmjs.com/package/antd",target:"_blank",rel:"noopener noreferrer",children:"Ant Design"})," 或 ",(0,s.jsx)(r.a,{href:"https://www.npmjs.com/package/@arco-design/web-react",target:"_blank",rel:"noopener noreferrer",children:"Arco Design"})," 组件库时，Builder 会自动开启按需引入功能，默认配置可参考 ",(0,s.jsx)(r.a,{href:"/api/config-source#sourcetransformimport",children:"source.transformImport"}),"。"]}),"\n",(0,s.jsxs)(r.p,{children:["在使用其他组件库时，如果该组件库支持按需引入，我们推荐优先通过 ",(0,s.jsx)(r.a,{href:"/api/config-source#sourcetransformimport",children:"source.transformImport"})," 配置按需引入。"]})]})}var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return r?(0,s.jsx)(r,Object.assign({},e,{children:(0,s.jsx)(o,e)})):o(e)}}}]);