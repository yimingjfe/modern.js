(self.webpackChunk_modern_js_builder_doc=self.webpackChunk_modern_js_builder_doc||[]).push([["docs_zh_api_config-output_mdx"],{27329:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e,n){for(var s in n)Object.defineProperty(e,s,{enumerable:!0,get:n[s]})}(n,{frontmatter:function(){return T},title:function(){return E},toc:function(){return L},default:function(){return I}});var r=s("9880"),i=s("23169"),t=s.ir(s("13878")),d=s.ir(s("64893")),c=s.ir(s("21810")),l=s.ir(s("9404")),a=s.ir(s("81480")),o=s.ir(s("34104")),h=s.ir(s("43579")),u=s.ir(s("28064")),j=s.ir(s("81000")),x=s.ir(s("71577")),p=s.ir(s("62059")),m=s.ir(s("45252")),g=s.ir(s("75229")),f=s.ir(s("9911")),b=s.ir(s("19237")),v=s.ir(s("17353")),N=s.ir(s("80899")),y=s.ir(s("95751")),S=s.ir(s("35622")),O=s.ir(s("37583")),M=s.ir(s("91820")),C=s.ir(s("84231")),P=s.ir(s("49428")),_=s.ir(s("80813")),k=s.ir(s("69633")),D=s.ir(s("21834")),R=s.ir(s("91965")),w=s.ir(s("83")),X=s.ir(s("21154")),F=s.ir(s("63905")),T={extractApiHeaders:[2]},E="Output Config",L=[{text:"output.assetPrefix",depth:2,id:"outputassetprefix"},{text:"output.assetsRetry",depth:2,id:"outputassetsretry"},{text:"output.charset",depth:2,id:"outputcharset"},{text:"output.cleanDistPath",depth:2,id:"outputcleandistpath"},{text:"output.convertToRem",depth:2,id:"outputconverttorem"},{text:"output.copy",depth:2,id:"outputcopy"},{text:"output.cssModules",depth:2,id:"outputcssmodules"},{text:"output.cssModuleLocalIdentName",depth:2,id:"outputcssmodulelocalidentname"},{text:"output.dataUriLimit",depth:2,id:"outputdataurilimit"},{text:"output.disableCssExtract",depth:2,id:"outputdisablecssextract"},{text:"output.disableCssModuleExtension",depth:2,id:"outputdisablecssmoduleextension"},{text:"output.distPath",depth:2,id:"outputdistpath"},{text:"output.disableMinimize",depth:2,id:"outputdisableminimize"},{text:"output.disableSourceMap",depth:2,id:"outputdisablesourcemap"},{text:"output.disableSvgr",depth:2,id:"outputdisablesvgr"},{text:"output.disableTsChecker",depth:2,id:"outputdisabletschecker"},{text:"output.disableFilenameHash",depth:2,id:"outputdisablefilenamehash"},{text:"output.disableInlineRuntimeChunk",depth:2,id:"outputdisableinlineruntimechunk"},{text:"output.enableAssetManifest",depth:2,id:"outputenableassetmanifest"},{text:"output.enableAssetFallback",depth:2,id:"outputenableassetfallback"},{text:"output.enableLatestDecorators",depth:2,id:"outputenablelatestdecorators"},{text:"output.enableCssModuleTSDeclaration",depth:2,id:"outputenablecssmoduletsdeclaration"},{text:"output.enableInlineScripts",depth:2,id:"outputenableinlinescripts"},{text:"output.enableInlineStyles",depth:2,id:"outputenableinlinestyles"},{text:"output.externals",depth:2,id:"outputexternals"},{text:"output.filename",depth:2,id:"outputfilename"},{text:"output.legalComments",depth:2,id:"outputlegalcomments"},{text:"output.overrideBrowserslist",depth:2,id:"outputoverridebrowserslist"},{text:"output.polyfill",depth:2,id:"outputpolyfill"},{text:"output.svgDefaultExport",depth:2,id:"outputsvgdefaultexport"}];function B(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"output-config",children:["Output Config",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#output-config",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"本章节描述了 Builder 中与构建产物有关的配置。"}),"\n",(0,r.jsxs)(n.h2,{id:"outputassetprefix",children:["output.assetPrefix",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputassetprefix",children:"#"})]}),"\n","\n",(0,r.jsx)(t.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputassetsretry",children:["output.assetsRetry",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputassetsretry",children:"#"})]}),"\n","\n",(0,r.jsx)(d.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputcharset",children:["output.charset",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcharset",children:"#"})]}),"\n","\n",(0,r.jsx)(c.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputcleandistpath",children:["output.cleanDistPath",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcleandistpath",children:"#"})]}),"\n","\n",(0,r.jsx)(l.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputconverttorem",children:["output.convertToRem",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputconverttorem",children:"#"})]}),"\n","\n",(0,r.jsx)(a.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputcopy",children:["output.copy",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcopy",children:"#"})]}),"\n","\n",(0,r.jsx)(o.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputcssmodules",children:["output.cssModules",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcssmodules",children:"#"})]}),"\n","\n",(0,r.jsx)(h.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputcssmodulelocalidentname",children:["output.cssModuleLocalIdentName",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputcssmodulelocalidentname",children:"#"})]}),"\n","\n",(0,r.jsx)(u.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdataurilimit",children:["output.dataUriLimit",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdataurilimit",children:"#"})]}),"\n","\n",(0,r.jsx)(j.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisablecssextract",children:["output.disableCssExtract",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisablecssextract",children:"#"})]}),"\n","\n",(0,r.jsx)(x.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisablecssmoduleextension",children:["output.disableCssModuleExtension",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisablecssmoduleextension",children:"#"})]}),"\n","\n",(0,r.jsx)(p.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdistpath",children:["output.distPath",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdistpath",children:"#"})]}),"\n","\n",(0,r.jsx)(m.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisableminimize",children:["output.disableMinimize",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisableminimize",children:"#"})]}),"\n","\n",(0,r.jsx)(g.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisablesourcemap",children:["output.disableSourceMap",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisablesourcemap",children:"#"})]}),"\n","\n",(0,r.jsx)(f.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisablesvgr",children:["output.disableSvgr",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisablesvgr",children:"#"})]}),"\n","\n",(0,r.jsx)(b.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisabletschecker",children:["output.disableTsChecker",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisabletschecker",children:"#"})]}),"\n","\n",(0,r.jsx)(v.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisablefilenamehash",children:["output.disableFilenameHash",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisablefilenamehash",children:"#"})]}),"\n","\n",(0,r.jsx)(N.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputdisableinlineruntimechunk",children:["output.disableInlineRuntimeChunk",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputdisableinlineruntimechunk",children:"#"})]}),"\n","\n",(0,r.jsx)(y.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenableassetmanifest",children:["output.enableAssetManifest",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenableassetmanifest",children:"#"})]}),"\n","\n",(0,r.jsx)(S.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenableassetfallback",children:["output.enableAssetFallback",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenableassetfallback",children:"#"})]}),"\n","\n",(0,r.jsx)(O.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenablelatestdecorators",children:["output.enableLatestDecorators",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenablelatestdecorators",children:"#"})]}),"\n","\n",(0,r.jsx)(M.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenablecssmoduletsdeclaration",children:["output.enableCssModuleTSDeclaration",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenablecssmoduletsdeclaration",children:"#"})]}),"\n","\n",(0,r.jsx)(C.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenableinlinescripts",children:["output.enableInlineScripts",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenableinlinescripts",children:"#"})]}),"\n","\n",(0,r.jsx)(P.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputenableinlinestyles",children:["output.enableInlineStyles",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputenableinlinestyles",children:"#"})]}),"\n","\n",(0,r.jsx)(_.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputexternals",children:["output.externals",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputexternals",children:"#"})]}),"\n","\n",(0,r.jsx)(k.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputfilename",children:["output.filename",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputfilename",children:"#"})]}),"\n","\n",(0,r.jsx)(D.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputlegalcomments",children:["output.legalComments",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputlegalcomments",children:"#"})]}),"\n","\n",(0,r.jsx)(R.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputoverridebrowserslist",children:["output.overrideBrowserslist",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputoverridebrowserslist",children:"#"})]}),"\n","\n",(0,r.jsx)(w.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputpolyfill",children:["output.polyfill",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputpolyfill",children:"#"})]}),"\n","\n",(0,r.jsx)(X.default,{}),"\n",(0,r.jsxs)(n.h2,{id:"outputsvgdefaultexport",children:["output.svgDefaultExport",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#outputsvgdefaultexport",children:"#"})]}),"\n","\n",(0,r.jsx)(F.default,{})]})}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(B,e)})):B(e)}},13878:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",h3:"h3",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean | string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'/'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["在生产环境使用 CDN 部署时，可使用该选项设置静态资源的 URL 前缀，对应 webpack 的 ",(0,r.jsx)(n.a,{href:"https://webpack.js.org/guides/public-path/",target:"_blank",rel:"noopener noreferrer",children:"output.publicPath"})," 配置。"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"assetPrefix"})," 会影响构建产物中绝大部分静态资源的 URL，包括 JavaScript 文件、CSS 文件、图片、视频等。如果指定了一个错误的值，则在加载这些资源时可能会出现 404 错误。"]}),"\n",(0,r.jsxs)(n.p,{children:["该配置项仅用于生产环境。在开发环境下，请使用 ",(0,r.jsx)(n.code,{children:"dev.assetPrefix"})," 配置项进行设置。"]}),"\n",(0,r.jsxs)(n.p,{children:["设置后，项目的 JavaScript、CSS、图片等静态资源的 URL 都会加上 ",(0,r.jsx)(n.code,{children:"output.assetPrefix"})," 作为前缀："]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetPrefix: 'https://cdn.example.com/assets/',\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"构建之后，可以看到 JS 文件从以下地址加载："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<script\n  defer\n  src="https://cdn.example.com/assets/static/js/main.ebc4ff4f.js"\n></script>\n'})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},64893:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",h3:"h3",a:"a"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"Object"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"output.assetsRetry"})," 用于配置资源加载失败时的重试逻辑。配置类型如下:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export type AssetsRetryHookContext = {\n  times: number;\n  domain: string;\n  url: string;\n  tagName: string;\n};\n\nexport type AssetsRetryOptions = {\n  type?: string[];\n  domain?: string[];\n  max?: number;\n  test?: string | ((url: string) => boolean);\n  crossOrigin?: boolean;\n  onRetry?: (options: AssetsRetryHookContext) => void;\n  onSuccess?: (options: AssetsRetryHookContext) => void;\n  onFail?: (options: AssetsRetryHookContext) => void;\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"由于该能力会往 HTML 中注入额外的一些运行时代码，因此我们默认关闭了该能力，如果需要开启该能力，你可以添加以下配置："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {},\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["当你开启该能力后，",(0,r.jsx)(n.code,{children:"assetsRetry"})," 的默认配置如下："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export const defaultAssetsRetryOptions: AssetsRetryOptions = {\n  type: ['script', 'link', 'img'],\n  domain: [],\n  max: 3,\n  test: '',\n  crossOrigin: false,\n  onRetry: () => {},\n  onSuccess: () => {},\n  onFail: () => {},\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"同时你也可以使用以下的配置项，来定制你的重试逻辑。"}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretrymax",children:["assetsRetry.max",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretrymax",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"number"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"3"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"单个资源的最大重试次数。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      max: 3,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretrydomain",children:["assetsRetry.domain",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretrydomain",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string[]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"[]"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"指定资源加载失败时的重试域名，如果为空则使用当前页面的域名。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      domain: ['https://cdn1.example.com', 'https://cdn2.example.com'],\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretrytype",children:["assetsRetry.type",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretrytype",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string[]"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"['script', 'link', 'img']"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"可重试的资源类型。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      type: ['script', 'link'],\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretrytest",children:["assetsRetry.test",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretrytest",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string | ((url: string) => boolean) | undefined"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"匹配资源 URL 的正则表达式或函数，默认匹配所有资源。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      test: /cdn\\.example\\.com/,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretrycrossorigin",children:["assetsRetry.crossOrigin",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretrycrossorigin",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"undefined | boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," false"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["用于向 ",(0,r.jsx)(n.code,{children:"<script>"})," 资源标签中注入 crossorigin 属性，传入 true 则会启用默认值 anonymous。比如："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      crossOrigin: true,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretryonretry",children:["assetsRetry.onRetry",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretryonretry",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"undefined | (options: AssetsRetryHookContext) => void"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"资源重试时的回调函数。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      onRetry: ({ times, domain, url, tagName }) => {\n        console.log(\n          `Retry ${times} times, domain: ${domain}, url: ${url}, tagName: ${tagName}`,\n        );\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretryonsuccess",children:["assetsRetry.onSuccess",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretryonsuccess",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"undefined | (options: AssetsRetryHookContext) => void"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"资源重试成功时的回调函数。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      onSuccess: ({ times, domain, url, tagName }) => {\n        console.log(\n          `Retry ${times} times, domain: ${domain}, url: ${url}, tagName: ${tagName}`,\n        );\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretryonfail",children:["assetsRetry.onFail",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretryonfail",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"undefined | (options: AssetsRetryHookContext) => void"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"资源重试超过最大重试次数时的回调函数。比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      onFail: ({ times, domain, url, tagName }) => {\n        console.log(\n          `Retry ${times} times, domain: ${domain}, url: ${url}, tagName: ${tagName}`,\n        );\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"assetsretryinlinescript",children:["assetsRetry.inlineScript",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assetsretryinlinescript",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["是否将 ",(0,r.jsx)(n.code,{children:"assetsRetry"})," 的运行时 JavaScript 代码内联到 HTML 文件中。"]}),"\n",(0,r.jsxs)(n.p,{children:["如果你不希望在 HTML 文件中插入相关代码，可以将 ",(0,r.jsx)(n.code,{children:"assetsRetry.inlineScript"})," 设置为 ",(0,r.jsx)(n.code,{children:"false"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    assetsRetry: {\n      inlineScript: false,\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["添加以上配置后，",(0,r.jsx)(n.code,{children:"assetsRetry"})," 的运行时代码会被抽取为一个独立的 ",(0,r.jsx)(n.code,{children:"assets-retry.[version].js"})," 文件，并输出到产物目录下。"]}),"\n",(0,r.jsxs)(n.p,{children:["这种方式的弊端在于，",(0,r.jsx)(n.code,{children:"assets-retry.[version].js"})," 自身有加载失败的可能性。如果出现这种情况，静态资源重试的逻辑就无法生效。因此，我们更推荐将运行时代码内联到 HTML 文件中。"]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},21810:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"'ascii' | 'utf8'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'ascii'"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，Builder 的产物内容是纯 ASCII 的，并且会转义所有非 ASCII 字符。"}),"\n",(0,r.jsxs)(n.p,{children:["如果不希望进行转义，而是输出所有原始字符，可以将 ",(0,r.jsx)(n.code,{children:"output.charset"})," 设置为 ",(0,r.jsx)(n.code,{children:"utf8"}),"。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    charset: 'utf8',\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.charset"})," 为 ",(0,r.jsx)(n.code,{children:"utf8"})," 时，Builder 会自动将 ",(0,r.jsx)(n.code,{children:'<meta charset="utf-8">'})," 添加到生成的 HTML 文件中。"]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},9404:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否在构建开始前清理 dist 目录下的所有文件。"}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Builder 会自动清理 dist 目录下的文件，你可以把 ",(0,r.jsx)(n.code,{children:"cleanDistPath"})," 设置为 ",(0,r.jsx)(n.code,{children:"false"})," 来禁用该行为。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    cleanDistPath: false,\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},81480:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h4:"h4",a:"a",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h3:"h3"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean | object"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["通过设置 ",(0,r.jsx)(n.code,{children:"output.convertToRem"}),"，Builder 可进行如下处理："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"将 CSS 中的 px 转成 rem"}),"\n",(0,r.jsx)(n.li,{children:"在 HTML 模版中插入运行时代码，对根元素 fontSize 进行设置"}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"boolean-类型",children:["Boolean 类型",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#boolean-类型",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当设置 ",(0,r.jsx)(n.code,{children:"output.convertToRem"})," 为 ",(0,r.jsx)(n.code,{children:"true"}),"，将开启 rem 处理能力。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    convertToRem: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"此时，rem 配置默认如下："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"{\n  enableRuntime: true,\n  rootFontSize: 50,\n  screenWidth: 375,\n  rootFontSize: 50,\n  maxRootFontSize: 64,\n  widthQueryKey: '',\n  excludeEntries: [],\n  supportLandscape: false,\n  useRootFontSizeBeyondMax: false,\n  pxtorem: {\n    rootValue: 50,\n    unitPrecision: 5,\n    propList: ['*'],\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"object-类型",children:["Object 类型",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#object-类型",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.convertToRem"})," 的值为 ",(0,r.jsx)(n.code,{children:"object"})," 类型时，Builder 会根据当前配置进行 rem 处理。"]}),"\n",(0,r.jsx)(n.p,{children:"选项："}),"\n",(0,r.jsxs)(n.table,{children:["\n",(0,r.jsxs)(n.thead,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.th,{children:"名称"}),"\n",(0,r.jsx)(n.th,{children:"类型"}),"\n",(0,r.jsx)(n.th,{children:"默认值"}),"\n",(0,r.jsx)(n.th,{children:"描述"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.tbody,{children:["\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"enableRuntime"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})}),"\n",(0,r.jsx)(n.td,{children:"是否自动生成 runtime 代码来动态计算根元素字体大小"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"inlineRuntime"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})}),"\n",(0,r.jsxs)(n.td,{children:["是否将 runtime 代码内联到 HTML 文件中。如果设置为 ",(0,r.jsx)(n.code,{children:"false"}),"，运行时代码会被抽取为一个独立的 ",(0,r.jsx)(n.code,{children:"convert-rem.[version].js"})," 文件，并输出到产物目录下"]}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"rootFontSize"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"50"})}),"\n",(0,r.jsx)(n.td,{children:"根元素字体值"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"maxRootFontSize"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"64"})}),"\n",(0,r.jsx)(n.td,{children:"最大根元素字体值"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"widthQueryKey"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'' "})}),"\n",(0,r.jsx)(n.td,{children:"根据 widthQueryKey 的值去 url query 中取 client width"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"screenWidth"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"375"})}),"\n",(0,r.jsx)(n.td,{children:"UI 设计图宽度"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"excludeEntries"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"[]"})}),"\n",(0,r.jsx)(n.td,{children:"不进行调整的页面入口"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"supportLandscape"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),"\n",(0,r.jsx)(n.td,{children:"横屏时使用 height 计算 rem"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"useRootFontSizeBeyondMax"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),"\n",(0,r.jsx)(n.td,{children:"超过 maxRootFontSize 时，是否使用 rootFontSize"}),"\n"]}),"\n",(0,r.jsxs)(n.tr,{children:["\n",(0,r.jsx)(n.td,{children:"pxtorem"}),"\n",(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),"\n",(0,r.jsxs)(n.td,{children:["rootValue。默认与 rootFontSize 相同 ","unitPrecision: 5。精确位数 ","propList: ['*']。支持转换的 CSS 属性"]}),"\n",(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.a,{href:"https://github.com/cuth/postcss-pxtorem#options",target:"_blank",rel:"noopener noreferrer",children:"postcss-pxtorem"})," 插件属性"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    convertToRem: {\n      rootFontSize: 30,\n      excludeEntries: ['404', 'page2'],\n      pxtorem: {\n        propList: ['font-size'],\n      },\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},34104:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",a:"a"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"CopyPluginOptions | CopyPluginOptions['patterns']"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"将指定的文件或目录拷贝到构建输出目录中。"}),"\n",(0,r.jsxs)(n.p,{children:["例如，将 ",(0,r.jsx)(n.code,{children:"src/assets"})," 下的文件直接拷贝到 dist 目录："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    copy: [{ from: './src/assets', to: '' }],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["更详细的配置项请参考：",(0,r.jsx)(n.a,{href:"https://github.com/webpack-contrib/copy-webpack-plugin",target:"_blank",rel:"noopener noreferrer",children:"copy-webpack-plugin"})," 文档。"]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},28064:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",pre:"pre",p:"p",h3:"h3",a:"a",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// isProd 表示生产环境构建\nconst localIdentName = isProd\n  ? '[hash:base64:5]'\n  : '[path][name]__[local]--[hash:base64:5]';\n"})}),"\n",(0,r.jsx)(n.p,{children:"设置 CSS Modules 编译后生成的 className 格式。"}),"\n",(0,r.jsxs)(n.h3,{id:"默认值",children:["默认值",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认值",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cssModuleLocalIdentName"})," 在开发环境和生产环境有不同的默认值。"]}),"\n",(0,r.jsx)(n.p,{children:"在生产环境，Builder 会生成更简短的类名，从而减少构建产物的体积。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import styles from './index.module.scss';\n\n// 在开发环境下，值为 `.src-index-module__header--xxxxx`\n// 在生产环境下，值为 `.xxxxx`\nconsole.log(styles.header);\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"模板字符串",children:["模板字符串",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#模板字符串",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["在 ",(0,r.jsx)(n.code,{children:"cssModuleLocalIdentName"})," 中，你可以使用以下模板字符串："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[name]"})," - 源文件名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[local]"})," - 原始类名。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[hash]"})," - 字符串的哈希值。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[folder]"})," - 文件夹的相对路径。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[path]"})," - 源文件的相对路径。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[file]"})," - 文件名和路径。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[ext]"})," - 文件后缀名，包含点号。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[hash:<hashDigest>:<hashDigestLength>]"})," - 带有哈希设置的哈希。"]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["在使用 Rspack 作为打包工具时, 暂不支持配置 ",(0,r.jsx)(n.code,{children:"<hashDigest>"}),"。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["将 ",(0,r.jsx)(n.code,{children:"cssModuleLocalIdentName"})," 设置为其他值："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModuleLocalIdentName: '[hash:base64:4]',\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},43579:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h5:"h5",a:"a"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type CssModules = {\n  auto?: boolean | RegExp | ((resourcePath: string) => boolean);\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"自定义 CSS 模块配置。"}),"\n",(0,r.jsxs)(n.h5,{id:"cssmodulesauto",children:["cssModules.auto",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cssmodulesauto",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"auto 配置项允许基于文件名自动启用 CSS 模块。"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean | RegExp | ((resourcePath: string) => boolean)"}),";"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"类型说明："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"undefined"}),": 根据 ",(0,r.jsx)(n.a,{href:"https://modernjs.dev/builder/api/config-output.html#outputdisablecssmoduleextension",target:"_blank",rel:"noopener noreferrer",children:"output.disableCssModuleExtension"})," 配置项决定为哪些样式文件启用 CSS 模块。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"}),": 为所有匹配 ",(0,r.jsx)(n.code,{children:"/\\.module\\.\\w+$/i.test(filename)"})," 正则表达式的文件启用 CSS 模块。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"}),": 禁用 CSS 模块。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RegExp"}),": 为所有匹配 ",(0,r.jsx)(n.code,{children:"/RegExp/i.test(filename)"})," 正则表达式的文件禁用 CSS 模块。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"function"}),": 为所有通过基于文件名的过滤函数校验的文件启用 CSS 模块。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    cssModules: {\n      auto: resource => {\n        return resource.includes('.module.') || resource.includes('shared/');\n      },\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},81e3:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h3:"h3",a:"a"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type DataUriLimitConfig = {\n  svg?: number;\n  font?: number;\n  image?: number;\n  media?: number;\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const defaultDatUriLimit = {\n  svg: 10000,\n  font: 10000,\n  image: 10000,\n  media: 10000,\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"设置图片、字体、媒体等静态资源被自动内联为 base64 的体积阈值。"}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，体积小于 10KB 的图片、字体、媒体等文件，会自动经过 Base64 编码，内联到页面中，不再会发送独立的 HTTP 请求。"}),"\n",(0,r.jsxs)(n.p,{children:["你可以通过修改 ",(0,r.jsx)(n.code,{children:"dataUriLimit"})," 参数来调整这个阈值。"]}),"\n",(0,r.jsx)(n.p,{children:"其中："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"svg"}),"：表示 SVG 图片的体积阈值。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"font"}),"：表示字体文件的体积阈值。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"}),"：表示非 SVG 图片的体积阈值。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"media"}),"：表示视频等媒体资源的体积阈值。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"修改图片资源的阈值为 5000 Bytes，设置视频资源不内联："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    dataUriLimit: {\n      image: 5000,\n      media: 0,\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},71577:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"打包工具："})," ",(0,r.jsx)(n.code,{children:"仅支持 webpack"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否禁用 CSS 提取逻辑，并将 CSS 文件内联到 JS 文件中。"}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Builder 会把 CSS 提取为独立的 ",(0,r.jsx)(n.code,{children:".css"})," 文件，并输出到构建产物目录。设置该选项为 ",(0,r.jsx)(n.code,{children:"true"})," 后，CSS 文件会被内联到 JS 文件中，并在运行时通过 ",(0,r.jsx)(n.code,{children:"<style>"})," 标签插入到页面上。"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    disableCssExtract: true,\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},62059:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",h3:"h3",a:"a",pre:"pre",h4:"h4"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否将源码目录下的所有样式文件当做 CSS Modules 模块进行处理。"}),"\n",(0,r.jsxs)(n.p,{children:["在默认情况下，只有 ",(0,r.jsx)(n.code,{children:"*.module.css"})," 结尾的文件才被视为 CSS Modules 模块。开启该配置项之后，会将源码目录下的所有 ",(0,r.jsx)(n.code,{children:"*.css"})," 样式文件当做 CSS Modules 模块。"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:".sass"}),"、",(0,r.jsx)(n.code,{children:".scss"})," 和 ",(0,r.jsx)(n.code,{children:".less"})," 文件的处理规则与 ",(0,r.jsx)(n.code,{children:".css"})," 文件一致，也会受到 ",(0,r.jsx)(n.code,{children:"disableCssModuleExtension"})," 的影响。"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["我们不推荐开启此配置项，因为开启 ",(0,r.jsx)(n.code,{children:"disableCssModuleExtension"})," 后，CSS Modules 文件和普通 CSS 文件无法得到明确的区分，不利于长期维护。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableCssModuleExtension: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"规则",children:["规则",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#规则",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"以下是对 CSS Modules 判断规则的详细解释："}),"\n",(0,r.jsxs)(n.h4,{id:"未开启-disablecssmoduleextension（默认）",children:["未开启 disableCssModuleExtension（默认）",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#未开启-disablecssmoduleextension（默认）",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"以下文件会视为 CSS Modules："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["所有 ",(0,r.jsx)(n.code,{children:"*.module.css"})," 文件"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"以下文件会视为普通 CSS："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["所有 ",(0,r.jsx)(n.code,{children:"*.css"})," 文件（不含 ",(0,r.jsx)(n.code,{children:".module"}),"）"]}),"\n",(0,r.jsxs)(n.li,{children:["所有 ",(0,r.jsx)(n.code,{children:"*.global.css"})," 文件"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"开启-disablecssmoduleextension",children:["开启 disableCssModuleExtension",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#开启-disablecssmoduleextension",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"以下文件会视为 CSS Modules："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["源码目录下的 ",(0,r.jsx)(n.code,{children:"*.css"})," 和 ",(0,r.jsx)(n.code,{children:"*.module.css"})," 文件"]}),"\n",(0,r.jsxs)(n.li,{children:["node_modules 下的 ",(0,r.jsx)(n.code,{children:"*.module.css"})," 文件"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"以下文件会视为普通 CSS："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["所有 ",(0,r.jsx)(n.code,{children:"*.global.css"})," 文件"]}),"\n",(0,r.jsxs)(n.li,{children:["node_modules 下的 ",(0,r.jsx)(n.code,{children:"*.css"})," 文件（不含 ",(0,r.jsx)(n.code,{children:".module"}),"）"]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["对于 node_modules 中的 CSS Modules 文件，请始终使用 ",(0,r.jsx)(n.code,{children:"*.module.css"})," 后缀。\n"]})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},80899:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"移除生产环境的构建产物名称中的 hash 值。"}),"\n",(0,r.jsxs)(n.p,{children:["在生产环境构建后，会自动在文件名中间添加 hash 值，如果不需要添加，可以通过 ",(0,r.jsx)(n.code,{children:"output.disableFilenameHash"})," 配置来禁用该行为。"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，构建后的产物名称为："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"File                                     Size         Gzipped\ndist/static/css/187.7879e19d.css         126.99 KB    9.17 KB\ndist/static/js/main.18a568e5.js          2.24 KB      922 B\n"})}),"\n",(0,r.jsxs)(n.p,{children:["添加 ",(0,r.jsx)(n.code,{children:"output.disableFilenameHash"})," 配置："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableFilenameHash: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"重新构建，产物的名称变为："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"File                            Size         Gzipped\ndist/static/css/187.css         126.99 KB    9.17 KB\ndist/static/js/main.js          2.24 KB      922 B\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},95751:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",a:"a",h3:"h3",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"用于控制是否将打包工具的 runtime 代码内联到 HTML 中。"}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"什么是 runtimeChunk"}),(0,r.jsxs)(n.div,{className:"modern-directive-content",children:[(0,r.jsxs)(n.p,{children:["当 Builder 构建完成后，会在 dist 目录生成 ",(0,r.jsx)(n.code,{children:"builder-runtime.js"})," 文件，该文件为 webpack 或 Rspack 的 runtime 代码，即 runtimeChunk。"]}),"\n",(0,r.jsxs)(n.p,{children:["runtimeChunk 是一段运行时代码，它由 webpack 或 Rspack 提供，包含必要的模块处理逻辑，比如模块加载、模块解析等，具体可参考 ",(0,r.jsx)(n.a,{href:"https://webpack.js.org/concepts/manifest/#runtime",target:"_blank",rel:"noopener noreferrer",children:"Runtime"}),"。"]}),"\n"]})]}),"\n",(0,r.jsx)(n.p,{children:"在生产环境下，Builder 默认会将 runtimeChunk 文件内联到 HTML 文件中，而不是写到产物目录中，这样做是为了减少文件请求的数量。"}),"\n",(0,r.jsxs)(n.h3,{id:"禁用内联",children:["禁用内联",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#禁用内联",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["如果你不希望 runtimeChunk 文件被内联到 HTML 文件里，可以把 ",(0,r.jsx)(n.code,{children:"disableInlineRuntimeChunk"})," 设置为 ",(0,r.jsx)(n.code,{children:"true"}),"，此时会生成一个独立的 ",(0,r.jsx)(n.code,{children:"builder-runtime.js"})," 文件。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableInlineRuntimeChunk: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"合并到页面文件中",children:["合并到页面文件中",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#合并到页面文件中",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"如果你不希望生成独立的 runtimeChunk 文件，而是想让 runtimeChunk 代码被打包到页面的 JS 文件里，可以这样设置："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  tools: {\n    webpack: {\n      optimization: {\n        runtimeChunk: false,\n      },\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},75229:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否禁用生产环境下的代码压缩。"}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，JS 代码和 CSS 代码会在生产环境构建时被自动压缩，从而提升页面性能。如果你不希望执行代码压缩，可以将 ",(0,r.jsx)(n.code,{children:"disableMinimize"})," 设置为 ",(0,r.jsx)(n.code,{children:"true"}),"。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableMinimize: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsx)(n.p,{children:"该配置项通常用于代码调试和问题排查，不建议在生产环境禁用代码压缩，否则会导致页面性能显著下降。"})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},9911:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type DisableSourceMap =\n  | boolean\n  | {\n      js?: boolean;\n      css?: boolean;\n    };\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const defaultDisableSourceMap = {\n  js: false,\n  css: process.env.NODE_ENV === 'production',\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"是否禁用 Source Map 生成。"}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"什么是 Source Map"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsx)(n.p,{children:"Source Map 是保存源代码映射关系的信息文件，它记录了编译后的代码的每一个位置，以及所对应的编译前的位置。通过 Source Map，可以在调试编译后的代码时，直接查看对应的源代码。"})})]}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，Builder 的 Source Map 生成规则如下："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"在开发环境构建时，会生成 JS 文件和 CSS 文件的 SourceMap，便于进行开发调试。"}),"\n",(0,r.jsx)(n.li,{children:"在生产环境构建时，会生成 JS 文件的 Source Map，用于调试和排查线上问题；不会生成 CSS 文件的 Source Map。"}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsx)(n.p,{children:"在使用 Rspack 作为打包工具时，暂不支持单独禁用 css sourcemap。"})})]}),"\n",(0,r.jsx)(n.p,{children:"如果项目不需要 Source Map，可以关闭该功能，从而提升构建的速度。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableSourceMap: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"如果需要开启开发环境的 Source Map，并在生产环境禁用，可以设置为："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableSourceMap: process.env.NODE_ENV === 'production',\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"如果需要单独控制 JS 文件或 CSS 文件的 Source Map，可以参考下方设置："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableSourceMap: {\n      js: false,\n      css: true,\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},19237:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否调用 SVGR 将 SVG 转化为 React 组件。如果设置为 true，将把所有的.svg 文件视为资源处理。"}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，在 JS 文件中引用 SVG 资源时，Builder 会调用 SVGR，将 SVG 图片转换为一个 React 组件。\n如果你确定项目内的所有 SVG 资源都没有当成 React 组件使用时，可以通过将 ",(0,r.jsx)(n.code,{children:"disableSvgr"})," 设置为 true 来关闭此项转换，以提升构建性能。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableSvgr: true,\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},17353:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否禁用编译过程中的 TypeScript 类型检查。"}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Builder 执行构建的过程中，会在一个独立的进程里运行 TypeScript 类型检查工具，它的检查逻辑与 TypeScript 原生的 ",(0,r.jsx)(n.code,{children:"tsc"})," 命令一致，你可以通过 ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," 或是 Builder 的 ",(0,r.jsx)(n.code,{children:"tools.tsChecker"})," 配置项来自定义检查行为。"]}),"\n",(0,r.jsxs)(n.h3,{id:"阻塞编译",children:["阻塞编译",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#阻塞编译",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"在开发环境构建时，类型错误不会阻塞编译流程。"}),"\n",(0,r.jsx)(n.li,{children:"在生产环境构建时，类型错误会导致构建失败，以保证生产环境代码的稳定性。"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"禁用 TypeScript 类型检查："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableTsChecker: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"禁用开发环境构建时的类型检查："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'development',\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"禁用生产环境构建时的类型检查："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    disableTsChecker: process.env.NODE_ENV === 'production',\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsx)(n.p,{children:"不建议在生产环境构建时禁用类型检查，这会导致线上代码的稳定性下降，请谨慎使用。"})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},45252:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h3:"h3",a:"a"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type DistPathConfig = {\n  root?: string;\n  js?: string;\n  css?: string;\n  svg?: string;\n  font?: string;\n  html?: string;\n  image?: string;\n  media?: string;\n  server?: string;\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const defaultDistPath = {\n  root: 'dist',\n  html: 'html',\n  js: 'static/js',\n  css: 'static/css',\n  svg: 'static/svg',\n  font: 'static/font',\n  image: 'static/image',\n  media: 'static/media',\n  server: 'bundles',\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"设置构建产物的输出目录，Builder 会根据产物的类型输出到对应的子目录下。"}),"\n",(0,r.jsx)(n.p,{children:"其中："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"root"}),": 表示所有构建产物输出的根目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"html"}),"：表示 HTML 文件的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"js"}),"：表示 JavaScript 文件的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"css"}),"：表示 CSS 样式文件的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"svg"}),"：表示 SVG 图片的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"font"}),"：表示字体文件的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"}),"：表示非 SVG 图片的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"media"}),"：表示视频等媒体资源的输出目录。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"server"}),": 表示服务端产物的输出目录，仅在 target 为 ",(0,r.jsx)(n.code,{children:"node"})," 时有效。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["以 JavaScript 文件为例，会输出到 ",(0,r.jsx)(n.code,{children:"distPath.root"})," + ",(0,r.jsx)(n.code,{children:"distPath.js"})," 目录，即为 ",(0,r.jsx)(n.code,{children:"dist/static/js"}),"。"]}),"\n",(0,r.jsxs)(n.p,{children:["如果需要将 JavaScript 文件输出到 ",(0,r.jsx)(n.code,{children:"build/resource/js"})," 目录，可以这样设置："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    distPath: {\n      root: 'build',\n      js: 'resource/js',\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},37583:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"开启该选项后，当编译过程中遇到无法识别的文件类型时，会直接将该文件直接输出到产物目录；否则会抛出一个异常。"}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"开启配置项："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableAssetFallback: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"在代码中引用一个未知类型的模块："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import './foo.xxx';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["编译后，",(0,r.jsx)(n.code,{children:"foo.xxx"})," 会被自动输出到 ",(0,r.jsx)(n.code,{children:"dist/static/media"})," 目录下。"]}),"\n",(0,r.jsxs)(n.p,{children:["你可以通过 ",(0,r.jsx)(n.code,{children:"output.distPath.media"})," 和 ",(0,r.jsx)(n.code,{children:"output.filename.media"})," 配置项来控制 fallback 后的输出路径和文件名称。"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["开启该配置会导致 webpack 配置中的 rules 结构变化，增加一层额外的 ",(0,r.jsx)(n.code,{children:"oneOf"})," 嵌套结构。大多数情况下，我们不推荐你使用此配置。\n"]})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},35622:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否生成 manifest 文件，该文件包含所有构建产物的信息。"}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"添加以下配置来开启："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableAssetManifest: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["开启后，当编译完成时，会自动生成 ",(0,r.jsx)(n.code,{children:"dist/manifest.json"})," 文件："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "files": {\n    "main.css": "/static/css/main.45b01211.css",\n    "main.js": "/static/js/main.52fd298f.js",\n    "html/main/index.html": "/html/main/index.html"\n  },\n  "entrypoints": ["static/css/main.45b01211.css", "static/js/main.52fd298f.js"]\n}\n'})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},84231:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"打包工具："})," ",(0,r.jsx)(n.code,{children:"仅支持 webpack"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"是否生成 CSS Modules 的 TypeScript 声明文件。"}),"\n",(0,r.jsxs)(n.h3,{id:"example",children:["Example",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"启用 CSS Module TypeScript 声明，比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableCssModuleTSDeclaration: true,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["项目构建完成后，每个 CSS Module 文件都会生成一个 ",(0,r.jsx)(n.code,{children:".d.ts"})," 文件。例如："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"interface CssExports {\n  title: string;\n}\nexport const cssExports: CssExports;\nexport default cssExports;\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},49428:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",a:"a",h3:"h3",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean | RegExp"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"打包工具："})," ",(0,r.jsx)(n.code,{children:"仅支持 webpack"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["用来控制生产环境中是否用 ",(0,r.jsx)(n.code,{children:"<script>"})," 标签将产物中的 script 文件（.js 文件）inline 到 HTML 中。"]}),"\n",(0,r.jsx)(n.p,{children:"注意，如果开启了这个选项，那么 script 文件将不会被写入产物目录中，而只会以 inline 脚本的形式存在于 HTML 文件中。"}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["当使用约定式路由时，如果开启了这个选项，需要将 ",(0,r.jsx)(n.a,{href:"https://modernjs.dev/configure/app/output/splitRouteChunks.html",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.code,{children:"output.splitRouteChunks"})})," 设置为 false。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，我们有这样的产物文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dist/html/main/index.html\ndist/static/css/style.css\ndist/static/js/main.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:["开启 ",(0,r.jsx)(n.code,{children:"output.enableInlineScripts"})," 选项后："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableInlineScripts: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"产物文件将变成："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dist/html/main/index.html\ndist/static/css/style.css\n"})}),"\n",(0,r.jsxs)(n.p,{children:["同时，",(0,r.jsx)(n.code,{children:"dist/static/js/main.js"})," 文件将被 inline 到 ",(0,r.jsx)(n.code,{children:"index.html"})," 中："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<html>\n  <body>\n    <script>\n      // content of dist/static/js/main.js\n    </script>\n  </body>\n</html>\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"通过正则匹配",children:["通过正则匹配",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#通过正则匹配",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当你需要内联产物中的一部分 JS 文件时，你可以将 ",(0,r.jsx)(n.code,{children:"enableInlineScripts"})," 设置为一个正则表达式，匹配需要内联的 JS 文件的 URL。"]}),"\n",(0,r.jsxs)(n.p,{children:["比如，将产物中的 ",(0,r.jsx)(n.code,{children:"main.js"})," 内联到 HTML 中，你可以添加如下配置："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableInlineScripts: /\\/main\\.\\w+\\.js$/,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["生产环境的文件名中默认包含了一个 hash 值，比如 ",(0,r.jsx)(n.code,{children:"/main.18a568e5.js"}),"。\n"]})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},80813:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",a:"a",h3:"h3",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean | RegExp"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["用来控制生产环境中是否用 ",(0,r.jsx)(n.code,{children:"<style>"})," 标签将产物中的 style 文件（.css 文件）inline 到 HTML 中。"]}),"\n",(0,r.jsx)(n.p,{children:"注意，如果开启了这个选项，那么 style 文件将不会被写入产物目录中，而只会以 inline 样式的形式存在于 HTML 文件中。"}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["当使用约定式路由时，如果开启了这个选项，需要将 ",(0,r.jsx)(n.a,{href:"https://modernjs.dev/configure/app/output/splitRouteChunks.html",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.code,{children:"output.splitRouteChunks"})})," 设置为 false。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"默认情况下，我们有这样的产物文件："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dist/html/main/index.html\ndist/static/css/style.css\ndist/static/js/main.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:["开启 ",(0,r.jsx)(n.code,{children:"output.enableInlineStyles"})," 选项后："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableInlineStyles: true,\n  },\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"产物文件将变成："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dist/html/main/index.html\ndist/static/js/main.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:["同时，",(0,r.jsx)(n.code,{children:"dist/static/css/style.css"})," 文件将被 inline 到 ",(0,r.jsx)(n.code,{children:"index.html"})," 中："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<html>\n  <head>\n    <style>\n      /* content of dist/static/css/style.css */\n    </style>\n  </head>\n  <body></body>\n</html>\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"通过正则匹配",children:["通过正则匹配",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#通过正则匹配",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当你需要内联产物中的一部分 CSS 文件时，你可以将 ",(0,r.jsx)(n.code,{children:"enableInlineStyles"})," 设置为一个正则表达式，匹配需要内联的 CSS 文件的 URL。"]}),"\n",(0,r.jsxs)(n.p,{children:["比如，将产物中的 ",(0,r.jsx)(n.code,{children:"main.css"})," 内联到 HTML 中，你可以添加如下配置："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    enableInlineStyles: /\\/main\\.\\w+\\.css$/,\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["生产环境的文件名中默认包含了一个 hash 值，比如 ",(0,r.jsx)(n.code,{children:"/main.18a568e5.css"}),"。\n"]})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},91820:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["是否要使用 ",(0,r.jsx)(n.a,{href:"https://github.com/tc39/proposal-decorators/tree/7fa580b40f2c19c561511ea2c978e307ae689a1b",target:"_blank",rel:"noopener noreferrer",children:"新版 decorator 提案"})," 进行编译。"]}),"\n",(0,r.jsxs)(n.p,{children:["默认情况下，Builder 在编译装饰器时采用 ",(0,r.jsx)(n.a,{href:"https://github.com/wycats/javascript-decorators/blob/e1bf8d41bfa2591d949dd3bbf013514c8904b913/README.md",target:"_blank",rel:"noopener noreferrer",children:"旧版 decorator 提案"}),"。"]}),"\n",(0,r.jsxs)(n.p,{children:["将 ",(0,r.jsx)(n.code,{children:"output.enableLatestDecorators"})," 设置为 ",(0,r.jsx)(n.code,{children:"true"})," 时，Builder 会采用新版 decorator 提案 (2018-09 版本) 进行编译。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export default {\n  output: {\n    enableLatestDecorators: true,\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},69633:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",h3:"h3",pre:"pre",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string | object | function | RegExp"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["在构建时，防止将代码中某些 ",(0,r.jsx)(n.code,{children:"import"})," 的依赖包打包到 bundle 中，而是在运行时再去从外部获取这些依赖。"]}),"\n",(0,r.jsxs)(n.p,{children:["详情请见: ",(0,r.jsx)(n.a,{href:"https://webpack.docschina.org/configuration/externals/",target:"_blank",rel:"noopener noreferrer",children:"webpack 外部扩展 (Externals)"})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["将 ",(0,r.jsx)(n.code,{children:"react-dom"})," 依赖从构建产物中剔除。为了在运行时获取这个模块, ",(0,r.jsx)(n.code,{children:"react-dom"})," 的值将全局检索 ",(0,r.jsx)(n.code,{children:"ReactDOM"})," 变量。"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    externals: {\n      'react-dom': 'ReactDOM',\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsx)(n.p,{children:"当构建 Web Worker 产物时，externals 将不会生效。这是因为 Worker 环境不支持通过访问全局变量。"})})]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},21834:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",pre:"pre",code:"code",p:"p",h3:"h3",a:"a",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"类型："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"type FilenameConfig = {\n  js?: string;\n  css?: string;\n  svg?: string;\n  font?: string;\n  image?: string;\n  media?: string;\n};\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"默认值："})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// 开发环境\nconst devDefaultFilename = {\n  js: '[name].js',\n  css: '[name].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n};\n\n// 生产环境\nconst prodDefaultFilename = {\n  js: '[name].[contenthash:8].js',\n  css: '[name].[contenthash:8].css',\n  svg: '[name].[contenthash:8].svg',\n  font: '[name].[contenthash:8][ext]',\n  image: '[name].[contenthash:8][ext]',\n  media: '[name].[contenthash:8][ext]',\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"设置构建产物的名称。"}),"\n",(0,r.jsxs)(n.p,{children:["在生产环境构建后，会自动在文件名中间添加 hash 值，如果不需要添加，可以通过 ",(0,r.jsx)(n.code,{children:"output.disableFilenameHash"})," 配置来禁用该行为。"]}),"\n",(0,r.jsx)(n.p,{children:"下面是各个文件类型的说明："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"js"}),"：表示 JavaScript 文件的名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"css"}),"：表示 CSS 样式文件的名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"svg"}),"：表示 SVG 图片的名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"font"}),"：表示字体文件的名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image"}),"：表示非 SVG 图片的名称。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"media"}),"：表示视频等媒体资源的名称。"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["修改 JavaScript 文件的名称为 ",(0,r.jsx)(n.code,{children:"[name]_script.js"}),"："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    filename: {\n      js:\n        process.env.NODE_ENV === 'production'\n          ? '[name]_script.[contenthash:8].js'\n          : '[name]_script.js',\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"文件名中的 hash 值"}),(0,r.jsxs)(n.div,{className:"modern-directive-content",children:[(0,r.jsxs)(n.p,{children:["通常来说，我们只会在生产环境下设置文件名的 hash 值（即 ",(0,r.jsx)(n.code,{children:"process.env.NODE_ENV === 'production'"})," 时）。"]}),"\n",(0,r.jsxs)(n.p,{children:["如果你在开发环境下设置了文件名的 hash，那么可能会导致热更新不生效（尤其是 CSS 文件）。这是因为每次文件内容变化时，都会引起 hash 变化，导致 ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/mini-css-extract-plugin",target:"_blank",rel:"noopener noreferrer",children:"mini-css-extract-plugin"})," 等工具无法读取到最新的文件内容。\n"]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"异步模块的文件名",children:["异步模块的文件名",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#异步模块的文件名",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"当你在代码中通过 dynamic import 的方式引入模块时，该模块会被单独打包成一个文件，它默认的命名规则如下："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["在开发环境下会基于模块路径生成名称，比如 ",(0,r.jsx)(n.code,{children:"dist/static/js/async/src_add_ts.js"}),"。"]}),"\n",(0,r.jsxs)(n.li,{children:["在生产环境下会是一个随机的数字 id，比如 ",(0,r.jsx)(n.code,{children:"dist/static/js/async/798.27e3083e.js"}),"，这是为了避免在生产环境中泄露源代码的路径，同时字符数也更少。"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",meta:'title="src/index.ts"',children:"const { add } = await import('./add.ts');\n"})}),"\n",(0,r.jsxs)(n.p,{children:["如果你希望为异步模块指定一个固定的名称，可以通过打包工具提供的 ",(0,r.jsx)(n.a,{href:"https://webpack.js.org/api/module-methods/#magic-comments",target:"_blank",rel:"noopener noreferrer",children:"magic comments"})," 来实现，通过 ",(0,r.jsx)(n.code,{children:"webpackChunkName"})," 指定模块名称："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",meta:'title="src/index.ts"',children:"const { add } = await import(\n  /* webpackChunkName: \"my-chunk-name\" */ './add.ts'\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["通过以上写法指定模块名称后，生成的文件会是 ",(0,r.jsx)(n.code,{children:"dist/static/js/async/my-chunk-name.js"}),"。"]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},91965:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",div:"div",h3:"h3",a:"a",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"'linked' | 'inline' | 'none'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'linked'"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"配置 legal comment 的处理方式。"}),"\n",(0,r.jsxs)(n.p,{children:["legal comment 是 JS 或 CSS 文件中的一些特殊注释，这些注释包含 ",(0,r.jsx)(n.code,{children:"@license"})," 或 ",(0,r.jsx)(n.code,{children:"@preserve"}),"，或是以 ",(0,r.jsx)(n.code,{children:"//!"})," 开头。默认情况下，这些注释保留在输出文件中，因为这遵循了代码原作者的意图。"]}),"\n",(0,r.jsxs)(n.p,{children:["你可以通过 ",(0,r.jsx)(n.code,{children:"legalComments"})," 来配置相关行为："]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"linked"}),"：将所有 legal comments 移至 .LEGAL.txt 文件并通过注释链接到它们。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"inline"}),"：保留所有 legal comments。"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"none"}),"：移除所有 legal comments。"]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["在使用 Rspack 作为打包工具时，暂不支持 ",(0,r.jsx)(n.code,{children:"inline"})," 配置项。\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"移除所有 legal comments。"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    legalComments: 'none',\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},83:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",a:"a",h4:"h4",pre:"pre",h3:"h3"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"string[] | Record<BuilderTarget, string[]>"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["指定项目兼容的目标浏览器范围。该值会被 ",(0,r.jsx)(n.a,{href:"https://babeljs.io/docs/en/babel-preset-env",target:"_blank",rel:"noopener noreferrer",children:"@babel/preset-env"})," 和 ",(0,r.jsx)(n.a,{href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer",children:"autoprefixer"})," 用来确定需要转换的 JavaScript 语法特性和需要添加的 CSS 浏览器前缀。"]}),"\n",(0,r.jsxs)(n.h4,{id:"优先级",children:["优先级",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#优先级",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"overrideBrowserslist"})," 配置的优先级高于项目中的 ",(0,r.jsx)(n.code,{children:".browserslistrc"})," 配置文件和 package.json 中的 ",(0,r.jsx)(n.code,{children:"browserslist"})," 字段。"]}),"\n",(0,r.jsxs)(n.p,{children:["大多数场景下，推荐优先使用 ",(0,r.jsx)(n.code,{children:".browserslistrc"})," 文件，而不是使用 ",(0,r.jsx)(n.code,{children:"overrideBrowserslist"})," 配置。因为 ",(0,r.jsx)(n.code,{children:".browserslistrc"})," 文件是官方定义的配置文件，通用性更强，可以被社区中的其他库识别。"]}),"\n",(0,r.jsxs)(n.h4,{id:"默认值",children:["默认值",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认值",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["如果项目中没有定义任何 ",(0,r.jsx)(n.code,{children:"browserslist"})," 相关的配置，也没有定义 ",(0,r.jsx)(n.code,{children:"overrideBrowserslist"}),"，那么 Builder 会设置默认值为："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"['> 0.01%', 'not dead', 'not op_mini all'];\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"示例",children:["示例",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"下面是兼容移动端 H5 场景的示例："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    overrideBrowserslist: [\n      'iOS >= 9',\n      'Android >= 4.4',\n      'last 2 versions',\n      '> 0.2%',\n      'not dead',\n    ],\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["可以查看 ",(0,r.jsx)(n.a,{href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noopener noreferrer",children:"browserslist 文档"})," 来了解如何自定义浏览器范围。"]}),"\n",(0,r.jsxs)(n.h4,{id:"根据产物类型设置",children:["根据产物类型设置",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#根据产物类型设置",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当你同时构建多种类型的产物时，你可以为不同的产物类型设置不同的目标浏览器范围。此时，你需要把 ",(0,r.jsx)(n.code,{children:"overrideBrowserslist"})," 设置为一个对象，对象的 key 为对应的产物类型。"]}),"\n",(0,r.jsxs)(n.p,{children:["比如为 ",(0,r.jsx)(n.code,{children:"web"})," 和 ",(0,r.jsx)(n.code,{children:"node"})," 设置不同的范围："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export default {\n  output: {\n    overrideBrowserslist: {\n      web: [\n        'iOS >= 9',\n        'Android >= 4.4',\n        'last 2 versions',\n        '> 0.2%',\n        'not dead',\n      ],\n      node: ['node >= 14'],\n    },\n  },\n};\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},21154:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",h3:"h3",a:"a",h4:"h4",div:"div"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"'entry' | 'usage' | 'ua' | 'off'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'entry'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["通过 ",(0,r.jsx)(n.code,{children:"output.polyfill"})," 你可以配置 Polyfill 的注入方式。"]}),"\n",(0,r.jsxs)(n.h3,{id:"配置项",children:["配置项",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置项",children:"#"})]}),"\n",(0,r.jsxs)(n.h4,{id:"entry",children:["entry",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entry",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.polyfill"})," 配置为 ",(0,r.jsx)(n.code,{children:"'entry'"})," 时，会在每个入口文件中注入 Polyfill。"]}),"\n",(0,r.jsxs)(n.p,{children:["等价于 ",(0,r.jsx)(n.code,{children:"@babel/preset-env"})," 的 ",(0,r.jsx)(n.code,{children:"useBuiltIns: 'entry'"})," 配置。"]}),"\n",(0,r.jsxs)(n.h4,{id:"usage",children:["usage",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#usage",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.polyfill"})," 配置为 ",(0,r.jsx)(n.code,{children:"'usage'"})," 时，会在每个文件中根据代码中使用的 API 注入 Polyfill。"]}),"\n",(0,r.jsxs)(n.p,{children:["等价于 ",(0,r.jsx)(n.code,{children:"@babel/preset-env"})," 的 ",(0,r.jsx)(n.code,{children:"useBuiltIns: 'usage'"})," 配置。"]}),"\n",(0,r.jsxs)(n.div,{className:"modern-directive tip",children:[(0,r.jsx)(n.div,{className:"modern-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"modern-directive-content",children:(0,r.jsxs)(n.p,{children:["在使用 Rspack 作为打包工具时，暂不支持 ",(0,r.jsx)(n.code,{children:"usage"})," 配置项。\n"]})})]}),"\n",(0,r.jsxs)(n.h4,{id:"ua",children:["ua",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ua",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"根据当前请求的 UA 信息，动态下发 Polyfill 代码。"}),"\n",(0,r.jsxs)(n.p,{children:["动态下发能力需要与上层框架结合使用，详情可参考 ",(0,r.jsx)(n.a,{href:"https://modernjs.dev/guides/advanced-features/compatibility.html#%E8%BF%90%E8%A1%8C%E6%97%B6%E6%8C%89%E9%9C%80-polyfill",target:"_blank",rel:"noopener noreferrer",children:"Modern.js - 运行时按需 Polyfill"}),"。"]}),"\n",(0,r.jsxs)(n.h4,{id:"off",children:["off",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#off",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"不注入 Polyfill。使用此选项时，需要自行保证代码的兼容性。"})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}},63905:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});var r=s("9880"),i=s("23169");function t(e){var n=Object.assign({ul:"ul",li:"li",strong:"strong",code:"code",p:"p",pre:"pre"},(0,i.useMDXComponents)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"类型："})," ",(0,r.jsx)(n.code,{children:"'url' | 'component'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"默认值："})," ",(0,r.jsx)(n.code,{children:"'url'"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"output.svgDefaultExport"})," 可以用来配置 SVG 文件的默认导出。"]}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.svgDefaultExport"})," 配置为 ",(0,r.jsx)(n.code,{children:"url"})," 时，SVG 文件的默认导出是文件的 URL。例如："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import logo from './logo.svg';\n\nconsole.log(logo); // => 资源 url\n"})}),"\n",(0,r.jsxs)(n.p,{children:["当 ",(0,r.jsx)(n.code,{children:"output.svgDefaultExport"})," 配置为 ",(0,r.jsx)(n.code,{children:"component"})," 时，SVG 文件的默认导出是文件的 React 组件。例如："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import Logo from './logo.svg';\n\nconsole.log(Logo); // => React 组件\n"})}),"\n",(0,r.jsxs)(n.p,{children:["此时，你也可以通过指定 ",(0,r.jsx)(n.code,{children:"?url"})," 的 query 来导入 url，比如："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import logo from './logo.svg?url';\n\nconsole.log(logo); // => 资源 url\n"})})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}}}]);