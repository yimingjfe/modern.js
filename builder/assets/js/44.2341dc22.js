(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{265:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"异常类问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异常类问题"}},[t._v("#")]),t._v(" 异常类问题")]),t._v(" "),a("h2",{attrs:{id:"webpack-编译出现-compilation-argument-报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-编译出现-compilation-argument-报错"}},[t._v("#")]),t._v(" webpack 编译出现 'compilation' argument 报错？")]),t._v(" "),a("p",[t._v("如果编译时出现以下报错，通常是由于项目中安装了错误的 webpack 版本，或者安装了多个 webpack 版本引起：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("TypeError: The "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compilation'")]),t._v(" argument must be an instance of Compilation\n")])])]),a("p",[t._v("webpack 版本问题有以下几种情况：")]),t._v(" "),a("ol",[a("li",[t._v("项目的 package.json 中直接声明了 webpack 依赖，并且与 Builder 依赖的 webpack 版本范围不同，无法匹配到同一个版本。")]),t._v(" "),a("li",[t._v("项目里安装的多个 npm 包都依赖了 webpack，并且它们依赖的 webpack 版本范围不同，无法匹配到同一个版本。")]),t._v(" "),a("li",[t._v("由于包管理器的 lock 机制，导致 lock 文件中产生了多个 webpack 版本。")])]),t._v(" "),a("p",[t._v("如果是第一种情况，建议从项目的 package.json 中移除 webpack 依赖。因为 Builder 默认封装了 webpack 相关能力，并且会在 "),a("RouterLink",{attrs:{to:"/zh/api/config-tools.html#tools-webpack"}},[t._v("tools.webpack")]),t._v(" 配置项中传入 webpack 对象。因此在大多数情况下，不建议在项目中额外安装 webpack 依赖。")],1),t._v(" "),a("p",[t._v("如果是第二种情况，建议看看能否升级某个 npm 包，使其依赖的 webpack 版本范围与 Builder 保持一致。也可以通过包管理器的能力来手动统一版本，比如使用 "),a("a",{attrs:{href:"https://classic.yarnpkg.com/lang/en/docs/selective-version-resolutions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("yarn resolutions"),a("OutboundLink")],1),t._v(" 或 "),a("a",{attrs:{href:"https://pnpm.io/package_json#pnpmoverrides",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm overrides"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("如果是第三种情况，可以使用第二种情况中提到的两种方法，也可以尝试删除 lock 文件后重新安装来解决。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("删除 lock 文件会使项目中的依赖版本自动升级到指定范围下的最新版，请进行充分的测试。")])]),t._v(" "),a("h2",{attrs:{id:"编译产物中存在未编译的-es6-代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译产物中存在未编译的-es6-代码"}},[t._v("#")]),t._v(" 编译产物中存在未编译的 ES6+ 代码？")]),t._v(" "),a("p",[t._v("默认情况下，Builder 不会通过 "),a("code",[t._v("babel-loader")]),t._v(" 或 "),a("code",[t._v("ts-loader")]),t._v(" 来编译 "),a("code",[t._v("node_modules")]),t._v(" 下的文件。如果项目引入的 npm 包中含有 ES6+ 语法，会被打包进产物中。")]),t._v(" "),a("p",[t._v("遇到这种情况时，可以通过 "),a("RouterLink",{attrs:{to:"/zh/api/config-source.html#source-include"}},[t._v("source.include")]),t._v(" 配置项来指定需要额外进行编译的目录或模块。")],1),t._v(" "),a("h2",{attrs:{id:"在-monorepo-中引用其他模块-代码没有被正确编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-monorepo-中引用其他模块-代码没有被正确编译"}},[t._v("#")]),t._v(" 在 Monorepo 中引用其他模块，代码没有被正确编译？")]),t._v(" "),a("p",[t._v("出于编译性能的考虑，默认情况下，Builder 不会通过 "),a("code",[t._v("babel-loader")]),t._v(" 或 "),a("code",[t._v("ts-loader")]),t._v(" 来编译 "),a("code",[t._v("node_modules")]),t._v(" 下的文件，也不会编译当前工程目录外部的文件。")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("source.include")]),t._v(" 配置项，可以指定需要额外进行编译的目录或模块。")]),t._v(" "),a("p",[t._v("详见 "),a("RouterLink",{attrs:{to:"/zh/api/config-source.html#source-include"}},[t._v("source.include 用法介绍")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"编译时报错-you-may-need-additional-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译时报错-you-may-need-additional-loader"}},[t._v("#")]),t._v(" 编译时报错 "),a("code",[t._v("You may need additional loader")]),t._v("？")]),t._v(" "),a("p",[t._v("如果编译过程中遇到了以下报错提示，表示存在个别文件无法被正确编译。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Module parse failed: Unexpected token\nFile was processed with these loaders:\n * some-loader/index.js\n\nYou may need an additional loader to handle the result of these loaders.\n")])])]),a("p",[t._v("解决方法：")]),t._v(" "),a("ul",[a("li",[t._v("如果是引用了当前工程外部的 "),a("code",[t._v(".ts")]),t._v(" 文件，或者是 node_modules 下的 "),a("code",[t._v(".ts")]),t._v(" 文件，请添加 "),a("RouterLink",{attrs:{to:"/zh/api/config-source.html#source-include"}},[t._v("source.include")]),t._v(" 配置项，指定需要额外进行编译的文件。")],1),t._v(" "),a("li",[t._v("如果是引用了 Builder 不支持的文件格式，请自行配置对应的 webpack loader 进行编译。")])]),t._v(" "),a("h2",{attrs:{id:"打开页面后报错-提示-exports-is-not-defined"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打开页面后报错-提示-exports-is-not-defined"}},[t._v("#")]),t._v(" 打开页面后报错，提示 exports is not defined？")]),t._v(" "),a("p",[t._v("如果编译正常，但是打开页面后出现 "),a("code",[t._v("exports is not defined")]),t._v(" 报错，通常是因为在项目中使用 babel 编译了一个 CommonJS 模块，导致 babel 出现异常。")]),t._v(" "),a("p",[t._v("在正常情况下，Builder 是不会使用 babel 来编译 CommonJS 模块的。如果项目中使用了 "),a("a",{attrs:{href:""}},[t._v("source.include")]),t._v(" 配置项，或使用了 "),a("RouterLink",{attrs:{to:"/zh/api/config-tools.html#tools-babel"}},[t._v("tools.babel")]),t._v(" 的 "),a("code",[t._v("addIncludes")]),t._v(" 方法，则可能会把一些 CommonJS 模块加入到 babel 编译中。")],1),t._v(" "),a("p",[t._v("该问题有两种解决方法：")]),t._v(" "),a("ol",[a("li",[t._v("避免将 CommonJS 模块加入到 babel 编译中。")]),t._v(" "),a("li",[t._v("将 babel 的 "),a("code",[t._v("sourceType")]),t._v(" 配置项设置为 "),a("code",[t._v("unambiguous")]),t._v("，示例如下：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tools")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("babel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sourceType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unambiguous'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("将 "),a("code",[t._v("sourceType")]),t._v(" 设置为 "),a("code",[t._v("unambiguous")]),t._v(" 可能会产生一些其他影响，请参考 "),a("a",{attrs:{href:"https://babeljs.io/docs/en/options#sourcetype",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel 官方文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"热更新后-react-组件的-state-丢失"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#热更新后-react-组件的-state-丢失"}},[t._v("#")]),t._v(" 热更新后 React 组件的 state 丢失？")]),t._v(" "),a("p",[t._v("Builder 使用 React 官方的 "),a("a",{attrs:{href:"https://github.com/pmmmwh/react-refresh-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fast Refresh"),a("OutboundLink")],1),t._v(" 能力来进行组件热更新。")]),t._v(" "),a("p",[t._v("在使用 Fast Refresh 时，要求组件不能为匿名函数，否则热更新后无法保留 React 组件的 state。")]),t._v(" "),a("p",[t._v("以下写法都是不正确的：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误写法 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误写法 2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("正确的写法为：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正确写法 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正确写法 2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("MyComponent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" MyComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"webpack-编译缓存未生效-应该如何排查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-编译缓存未生效-应该如何排查"}},[t._v("#")]),t._v(" webpack 编译缓存未生效，应该如何排查？")]),t._v(" "),a("p",[t._v("Builder 默认开启了 webpack 的持久化缓存。")]),t._v(" "),a("p",[t._v("首次编译完成后，会自动生成缓存文件，并输出到 "),a("code",[t._v("./node_modules/.cache/webpack")]),t._v(" 目录下。执行第二次编译时，会命中缓存，并大幅度提高编译速度。")]),t._v(" "),a("p",[t._v("当 "),a("code",[t._v("package.json")]),t._v(" 等配置文件被修改时，缓存会自动失效。")]),t._v(" "),a("p",[t._v("如果项目中 webpack 编译缓存一直未生效，可以添加以下配置进行排查：")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tools"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("webpack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("infrastructureLogging "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("infrastructureLogging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        debug"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("添加以上配置后，webpack 会输出日志用于 debug，请参考 "),a("code",[t._v("PackFileCacheStrategy")]),t._v(" 相关的日志来了解缓存失效的原因。")]),t._v(" "),a("h2",{attrs:{id:"打包后发现-tree-shaking-没有生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包后发现-tree-shaking-没有生效"}},[t._v("#")]),t._v(" 打包后发现 Tree Shaking 没有生效？")]),t._v(" "),a("p",[t._v("Builder 在生产构建时会默认开启 webpack 的 Tree Shaking 功能，Tree Shaking 是否能够生效，取决于业务代码能否满足 webpack 的 Tree Shaking 条件。")]),t._v(" "),a("p",[t._v("如果你遇到了 Tree Shaking 不生效的问题，可以检查下相关 npm 包的 "),a("code",[t._v("sideEffects")]),t._v(" 配置是否正确，如果不了解 "),a("code",[t._v("sideEffects")]),t._v(" 是什么，可以阅读以下两篇文档：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://webpack.docschina.org/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 官方文档 - Tree Shaking"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://bytedance.feishu.cn/docs/doccn8E1ldDct5uv1EEDQs8Ycwe",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree Shaking 问题排查指南"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"打包时出现-javascript-heap-out-of-memory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包时出现-javascript-heap-out-of-memory"}},[t._v("#")]),t._v(" 打包时出现 JavaScript heap out of memory?")]),t._v(" "),a("p",[t._v("该报错表示打包过程中出现了内存溢出问题，大多数情况下是由于打包的内容较多，超出了 Node.js 默认的内存上限。")]),t._v(" "),a("p",[t._v("如果出现 OOM 问题，最简单的方法是通过增加内存上限来解决，Node.js 提供了 "),a("code",[t._v("--max-old-space-size")]),t._v(" 选项来对此进行设置。你可以在 CLI 命令前添加 "),a("a",{attrs:{href:"https://nodejs.org/api/cli.html#node_optionsoptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("NODE_OPTIONS"),a("OutboundLink")],1),t._v(" 来设置此参数：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODE_OPTIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("--max_old_space_size"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16384")]),t._v(" modern build\n")])])]),a("p",[t._v("参数的值代表内存上限大小（MB)，一般情况下设置为 "),a("code",[t._v("16384")]),t._v("（16GB）即可。")]),t._v(" "),a("p",[t._v("Node.js 官方文档中有对以下参数更详细的解释：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://nodejs.org/api/cli.html#node_optionsoptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("NODE_OPTIONS"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://nodejs.org/api/cli.html#--max-old-space-sizesize-in-megabytes",target:"_blank",rel:"noopener noreferrer"}},[t._v("--max-old-space-size"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("除了增加内存上限，通过开启一些编译策略来提升效率也是一个解决方案。")]),t._v(" "),a("h2",{attrs:{id:"less-文件中的除法不生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#less-文件中的除法不生效"}},[t._v("#")]),t._v(" Less 文件中的除法不生效？")]),t._v(" "),a("p",[t._v("Less v4 版本与 v3 版本相比，除法的写法有一些区别：")]),t._v(" "),a("div",{staticClass:"language-less extra-class"},[a("pre",{pre:!0,attrs:{class:"language-less"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Less v3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".math")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1px")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px ."),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1px")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("2px "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1px")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Less v4")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".math")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2px / 2")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2px ."),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1px")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("2px "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1px")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Builder 内置的 Less 版本为 v4，低版本的写法不会生效，请注意区分。")]),t._v(" "),a("p",[t._v("Less 中除法的写法也可以通过配置项来修改，详见 "),a("a",{attrs:{href:"https://lesscss.org/usage/#less-options-math",target:"_blank",rel:"noopener noreferrer"}},[t._v("Less - Math"),a("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);a.default=n.exports}}]);